<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>üéÄ WOMAN HELP | –ü—Ä–µ–º–∏—É–º —Å–µ—Ä–≤–∏—Å –¥–ª—è –∂–µ–Ω—â–∏–Ω</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ */
        :root {
            --ivory-bg: #F9F7F3;
            --ivory-light: #FDFCF9;
            --graphite-dark: #3D3D3D;
            --graphite-medium: #555555;
            --graphite-light: #888888;
            --pastel-pink: #F2DDE6;
            --pink-light: #FAF2F6;
            --pink-medium: #E8CCD9;
            --pink-dark: #D4B8C7;
            --gold-metallic: #C5A880;
            --gold-dark: #A78B65;
            --lavender: #B9AFFF;
            --lavender-light: #F0EEFF;
            --white: #FFFFFF;
            --success: #38B2AC;
            --warning: #ED8936;
            --error: #E57373;
            --info: #5C6BC0;
            --primary-accent: var(--gold-metallic);
            --primary-accent-dark: var(--gold-dark);
            --secondary-accent: var(--lavender);
            --secondary-accent-light: var(--lavender-light);
            --action-color: var(--pastel-pink);
            --action-dark: var(--pink-medium);
            
            --primary-gradient: linear-gradient(135deg, var(--gold-metallic), var(--gold-dark));
            --secondary-gradient: linear-gradient(135deg, var(--lavender), #A396FF);
            --action-gradient: linear-gradient(135deg, var(--pastel-pink), var(--pink-medium));
            --pink-gradient: linear-gradient(135deg, var(--pastel-pink), var(--pink-light));
            
            --shadow-sm: 0 2px 8px rgba(61, 61, 61, 0.04);
            --shadow: 0 4px 16px rgba(61, 61, 61, 0.08);
            --shadow-lg: 0 8px 32px rgba(61, 61, 61, 0.12);
            --shadow-xl: 0 20px 40px rgba(61, 61, 61, 0.15);
            
            --radius-sm: 8px;
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-full: 9999px;
            
            --transition-fast: 0.15s ease;
            --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.4s ease;
            
            --nav-height: 70px;
            --bottom-nav-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--ivory-bg);
            color: var(--graphite-dark);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            padding-top: var(--nav-height);
            padding-bottom: var(--bottom-nav-height);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 16px;
            width: 100%;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å–≤–µ—Ä—Ö—É */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--nav-height);
            background: rgba(249, 247, 243, 0.97);
            border-bottom: 1px solid var(--pastel-pink);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--graphite-dark);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-img {
            height: 36px;
            width: 36px;
            border-radius: 8px;
            object-fit: cover;
            background: var(--primary-gradient);
            padding: 4px;
        }
        
        .logo-woman {
            color: var(--graphite-dark);
        }
        
        .logo-help {
            color: var(--gold-metallic);
        }
        
        .logo-tagline {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--graphite-medium);
            margin-left: 10px;
            font-family: 'Inter', sans-serif;
            padding-left: 10px;
            border-left: 1px solid var(--graphite-light);
        }
        
        .user-avatar {
            width: 42px;
            height: 42px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .user-avatar:hover {
            transform: scale(1.05);
        }
        
        .user-menu {
            display: none;
            position: absolute;
            top: 70px;
            right: 20px;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow-xl);
            padding: 10px;
            min-width: 200px;
            z-index: 1001;
            border: 1px solid rgba(61, 61, 61, 0.1);
            animation: fadeIn 0.2s ease;
        }
        
        .nav-menu-item {
            display: flex;
            align-items: center;
            padding: 10px;
            text-decoration: none;
            color: var(--graphite-dark);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
            gap: 10px;
            width: 100%;
        }
        
        .nav-menu-item:hover {
            background: rgba(61, 61, 61, 0.05);
        }
        
        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--bottom-nav-height);
            background: rgba(249, 247, 243, 0.98);
            border-top: 1px solid var(--pastel-pink);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--graphite-medium);
            padding: 8px 12px;
            border-radius: var(--radius);
            transition: var(--transition-fast);
            min-width: 70px;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: var(--pastel-pink);
            background: rgba(242, 221, 230, 0.08);
        }
        
        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
            min-height: calc(100vh - var(--nav-height) - var(--bottom-nav-height));
            padding: 20px 0;
            width: 100%;
        }
        
        .page.active {
            display: block;
        }
        
        /* –°–µ–∫—Ü–∏–∏ */
        .section {
            margin-bottom: 30px;
            width: 100%;
        }
        
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--graphite-dark);
            margin-bottom: 20px;
        }
        
        .section-subtitle {
            font-size: 1rem;
            color: var(--graphite-medium);
            margin-bottom: 24px;
            line-height: 1.5;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 20px;
            border: 1px solid rgba(61, 61, 61, 0.08);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            width: 100%;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border: none;
            border-radius: var(--radius);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 4px 12px rgba(197, 168, 128, 0.25);
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--graphite-dark);
            border: 2px solid rgba(61, 61, 61, 0.1);
        }
        
        .btn-action {
            background: var(--action-gradient);
            color: var(--graphite-dark);
            border: none;
        }
        
        /* Hero —Å–µ–∫—Ü–∏—è */
        .hero {
            background: linear-gradient(135deg, rgba(249, 247, 243, 0.9), rgba(242, 221, 230, 0.3));
            border-radius: var(--radius-xl);
            padding: 40px;
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--pastel-pink);
        }
        
        .hero:before,
        .hero:after {
            content: '';
            position: absolute;
            border-radius: 50%;
            opacity: 0.2;
        }
        
        .hero:before {
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, var(--lavender-light), transparent);
        }
        
        .hero:after {
            bottom: -30%;
            left: -30%;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, transparent, var(--pastel-pink));
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--graphite-dark);
            line-height: 1.2;
        }
        
        .hero .tagline {
            font-size: 1.8rem;
            color: var(--pastel-pink);
            font-weight: 600;
            margin-bottom: 24px;
        }
        
        .hero p {
            font-size: 1.1rem;
            color: var(--graphite-medium);
            margin-bottom: 32px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* –°–µ—Ç–∫–∏ */
        .grid {
            display: grid;
            gap: 16px;
            width: 100%;
        }
        
        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .category-card {
            text-align: center;
            padding: 20px 16px;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--pastel-pink);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .category-card:hover::before {
            transform: scaleX(1);
        }
        
        .category-icon {
            font-size: 2.5rem;
            color: var(--pastel-pink);
            margin-bottom: 15px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .category-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--pink-light), var(--pastel-pink));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pastel-pink);
            font-size: 2.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .category-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--graphite-dark);
        }
        
        .category-card p {
            color: var(--graphite-medium);
            font-size: 0.85rem;
            margin-bottom: 16px;
            flex-grow: 1;
        }
        
        /* –£—Å–ª—É–≥–∏ */
        .service-card {
            padding: 16px;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
            min-height: 220px;
            transition: all 0.3s ease;
            border: 1px solid rgba(242, 221, 230, 0.1);
        }
        
        .service-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
            border-color: var(--pastel-pink);
        }
        
        .service-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--pink-light), var(--pastel-pink));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pastel-pink);
            font-size: 2.5rem;
        }
        
        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }
        
        .service-header h4 {
            font-size: 1rem;
            font-weight: 600;
            flex: 1;
            margin-right: 10px;
            min-height: 48px;
            color: var(--graphite-dark);
        }
        
        .service-description {
            color: var(--graphite-medium);
            font-size: 0.85rem;
            margin-bottom: 16px;
            line-height: 1.4;
            flex-grow: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }
        
        .service-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .service-price {
            color: var(--pastel-pink);
            font-weight: 600;
            font-size: 0.9rem;
            background: rgba(242, 221, 230, 0.08);
            padding: 4px 8px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            background: var(--primary-gradient);
            color: white;
            padding: 30px 20px;
            border-radius: var(--radius-xl);
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pastel-pink);
            font-size: 2.5rem;
            font-weight: 700;
            border: 4px solid rgba(255, 255, 255, 0.3);
        }
        
        .profile-name {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .profile-email {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 16px;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: var(--radius);
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        /* –ü–æ–¥–ø–∏—Å–∫–∏ */
        .subscription-card {
            padding: 24px 20px;
            text-align: center;
            border: 2px solid rgba(61, 61, 61, 0.1);
            position: relative;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        
        .subscription-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }
        
        .subscription-card.popular {
            border-color: var(--pastel-pink);
        }
        
        .popular-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--action-gradient);
            color: var(--graphite-dark);
            padding: 4px 16px;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .subscription-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--graphite-dark);
        }
        
        .subscription-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--pastel-pink);
            margin: 16px 0;
        }
        
        .subscription-price span {
            font-size: 0.9rem;
            color: var(--graphite-medium);
        }
        
        .subscription-features {
            text-align: left;
            margin: 20px 0;
            flex-grow: 1;
        }
        
        .subscription-features li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--graphite-medium);
            font-size: 0.9rem;
        }
        
        .subscription-features i {
            color: var(--pastel-pink);
            font-size: 0.9rem;
        }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ */
        .service-stats {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: 40px 30px;
            margin: 40px 0;
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .stat-card {
            padding: 20px;
            border-radius: var(--radius);
            background: linear-gradient(135deg, rgba(242, 221, 230, 0.05), rgba(232, 204, 217, 0.05));
            border: 1px solid rgba(242, 221, 230, 0.1);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--pastel-pink);
            margin-bottom: 10px;
        }
        
        .stat-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--graphite-dark);
            margin-bottom: 8px;
        }
        
        .stat-description {
            color: var(--graphite-medium);
            font-size: 0.9rem;
        }
        
        /* –ë–∞–Ω–Ω–µ—Ä —Å —Ä–µ–∫–ª–∞–º–æ–π */
        .promo-banner {
            background: linear-gradient(135deg, var(--gold-metallic), var(--pastel-pink));
            color: white;
            padding: 30px;
            border-radius: var(--radius-lg);
            margin: 30px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 100px;
            right: 16px;
            z-index: 3000;
            background: white;
            border-radius: var(--radius);
            padding: 16px;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--pastel-pink);
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 90%;
            width: 350px;
        }
        
        .notification.error {
            border-left-color: var(--error);
        }
        
        .notification.warning {
            border-left-color: var(--warning);
        }
        
        .notification.info {
            border-left-color: var(--info);
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loader {
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(61, 61, 61, 0.1);
            border-top: 4px solid var(--pastel-pink);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--radius-lg);
            max-width: 400px;
            width: 100%;
            animation: modalSlideIn 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--graphite-dark);
        }
        
        .form-group {
            margin-bottom: 20px;
            width: 100%;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--graphite-dark);
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1.5px solid rgba(61, 61, 61, 0.1);
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--pastel-pink);
            box-shadow: 0 0 0 3px rgba(242, 221, 230, 0.1);
        }
        
        /* –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ */
        .create-task-form {
            margin-top: 20px;
        }
        
        /* –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á */
        .task-list {
            margin-top: 20px;
        }
        
        .task-item {
            margin-bottom: 16px;
            padding: 16px;
            background: white;
            border-radius: var(--radius);
            border: 1px solid rgba(61, 61, 61, 0.08);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        
        .task-title {
            font-weight: 600;
            font-size: 1.1rem;
            flex: 1;
            color: var(--graphite-dark);
        }
        
        .task-status {
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
            margin-left: 10px;
        }
        
        .task-status.new {
            background: rgba(25, 118, 210, 0.1);
            color: #1976D2;
        }
        
        .task-status.in_progress {
            background: rgba(255, 152, 0, 0.1);
            color: #EF6C00;
        }
        
        .task-status.completed {
            background: rgba(76, 175, 80, 0.1);
            color: #2E7D32;
        }
        
        .task-status.cancelled {
            background: rgba(229, 115, 115, 0.1);
            color: #C62828;
        }
        
        .task-status.searching {
            background: rgba(255, 193, 7, 0.1);
            color: #FF8F00;
        }
        
        .task-status.assigned {
            background: rgba(33, 150, 243, 0.1);
            color: #1565C0;
        }

.category-image, .service-image, .category-image-container {
    position: relative;
}

.category-image i, .service-image i, .category-image-container i {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
}

.category-image::before, .service-image::before, .category-image-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--pink-light), var(--pastel-pink));
    z-index: 0;
}
        
        /* –ö–Ω–æ–ø–∫–∞ "–í—Å–µ —É—Å–ª—É–≥–∏" */
        .view-all-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: white;
            color: var(--graphite-dark);
            border: 2px solid var(--graphite-dark);
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            margin-top: 20px;
        }
        
        .view-all-btn:hover {
            background: var(--graphite-dark);
            color: white;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ "–ì–∞–π–¥—ã" */
        .guides-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: var(--pastel-pink);
            color: white;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }
        
        .guides-btn:hover {
            background: var(--pink-medium);
            transform: translateY(-2px);
        }
        
        /* –°–µ–∫—Ü–∏—è –≥–∞–π–¥–æ–≤ */
        .guides-section {
            margin: 40px 0;
        }
        
        .guides-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .guide-card {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            border: 1px solid rgba(61, 61, 61, 0.08);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            cursor: pointer;
            height: 100%;
        }
        
        .guide-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }
        
        .guide-icon {
            font-size: 2.5rem;
            color: var(--pastel-pink);
            margin-bottom: 15px;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(242, 221, 230, 0.3); }
            70% { box-shadow: 0 0 0 10px rgba(242, 221, 230, 0); }
            100% { box-shadow: 0 0 0 0 rgba(242, 221, 230, 0); }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 0 12px;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .hero .tagline {
                font-size: 1.4rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .profile-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn {
                padding: 10px 20px !important;
                font-size: 0.9rem !important;
            }
            
            .modal-content {
                padding: 20px !important;
                margin: 10px !important;
            }
            
            .hero-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .hero-actions .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .logo-tagline {
                display: none;
            }
            
            .category-image,
            .service-image {
                height: 100px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 8px !important;
            }
            
            .hero {
                padding: 20px;
            }
            
            .hero h1 {
                font-size: 1.6rem;
            }
            
            .hero .tagline {
                font-size: 1.2rem;
            }
            
            .section-title {
                font-size: 1.4rem !important;
            }
            
            .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .profile-stats {
                grid-template-columns: 1fr;
                gap: 8px !important;
            }
            
            .stat-item {
                padding: 10px !important;
            }
            
            .nav-item span {
                font-size: 0.7rem;
            }
            
            .nav-item i {
                font-size: 1rem !important;
                margin-bottom: 2px !important;
            }
            
            .notification {
                width: 90%;
                right: 5%;
            }
            
            .bottom-nav {
                height: 55px !important;
                padding: 0 5px !important;
            }
            
            .nav-item span {
                font-size: 0.65rem !important;
            }
            
            .service-card {
                min-height: 180px;
            }
            
            .service-header h4 {
                min-height: 40px;
                font-size: 0.9rem;
            }
            
            .service-description {
                font-size: 0.8rem;
                -webkit-line-clamp: 2;
            }
            
            .category-image,
            .service-image {
                height: 80px;
            }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
        @media (min-width: 769px) and (max-width: 1024px) {
            .grid-3 {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            .container {
                padding: 0 16px !important;
            }
        }
        
        /* –•–æ–≤–µ—Ä—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ */
        @media (min-width: 1025px) {
            .card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow);
            }
            
            .btn:hover {
                transform: translateY(-2px);
            }
            
            .btn-primary:hover {
                box-shadow: 0 8px 20px rgba(197, 168, 128, 0.3);
            }
            
            .btn-secondary:hover {
                background: rgba(61, 61, 61, 0.02);
                border-color: var(--graphite-light);
                transform: translateY(-1px);
            }
            
            .btn-action:hover {
                background: linear-gradient(135deg, var(--pink-medium), var(--pastel-pink));
                transform: translateY(-2px);
            }
            
            .category-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow);
            }
        }
        
        /* –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∞ */
        .admin-access-btn,
        .performer-access-btn,
        .quick-tasks-btn {
            position: fixed;
            z-index: 1000;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            animation: pulse 2s infinite;
        }
        
        .admin-access-btn {
            bottom: 80px;
            right: 20px;
            background: var(--primary-gradient);
            color: white;
        }
        
        .performer-access-btn {
            bottom: 140px;
            right: 20px;
            background: var(--action-gradient);
            color: var(--graphite-dark);
        }
        
        .quick-tasks-btn {
            bottom: 80px;
            left: 20px;
            background: var(--action-gradient);
            color: var(--graphite-dark);
        }
        
        /* –£—Ç–∏–ª–∏—Ç—ã */
        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .w-100 { width: 100%; }
        .d-flex { display: flex; }
        .justify-between { justify-content: space-between; }
        .align-center { align-items: center; }
        .gap-10 { gap: 10px; }
        .gap-20 { gap: 20px; }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
        a {
            text-decoration: none;
            color: inherit;
        }
        
        button {
            font-family: 'Inter', sans-serif;
        }
        
        /* –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã */
        ::placeholder {
            color: var(--graphite-light);
            opacity: 0.7;
        }
        
        /* –°–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--ivory-bg);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--pastel-pink);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--pink-medium);
        }
        
        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        .auth-screen {
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .auth-content {
            text-align: center;
            max-width: 400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .auth-card {
            padding: 40px 30px;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--pastel-pink);
        }
        
        .auth-icon {
            font-size: 4rem;
            color: var(--pastel-pink);
            margin-bottom: 20px;
        }
        
        .auth-actions {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        /* –¢–∞–±—ã –¥–ª—è –∑–∞–¥–∞—á */
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(61, 61, 61, 0.1);
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .tab {
            padding: 12px 20px;
            font-weight: 500;
            color: var(--graphite-medium);
            border-bottom: 3px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition-fast);
        }
        
        .tab.active {
            color: var(--pastel-pink);
            border-bottom-color: var(--pastel-pink);
        }
        
        /* –ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            color: rgba(61, 61, 61, 0.1);
            margin-bottom: 20px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ */
        .chat-container {
            background: white;
            border-radius: var(--radius-lg);
            border: 1px solid rgba(61, 61, 61, 0.08);
            overflow: hidden;
            margin-top: 24px;
        }
        
        .chat-header {
            padding: 16px 20px;
            background: var(--pink-light);
            border-bottom: 1px solid rgba(61, 61, 61, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-messages-container {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(249, 247, 243, 0.5);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .chat-message {
            display: flex;
            max-width: 80%;
            animation: fadeInMessage 0.3s ease;
        }
        
        .chat-message.sent {
            margin-left: auto;
            flex-direction: row-reverse;
        }
        
        .message-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            box-shadow: var(--shadow-sm);
            word-break: break-word;
        }
        
        .chat-message.sent .message-bubble {
            background: linear-gradient(135deg, var(--pastel-pink), var(--pink-medium));
            color: var(--graphite-dark);
            border-bottom-right-radius: 4px;
        }
        
        .chat-message.received .message-bubble {
            background: white;
            border: 1px solid rgba(61, 61, 61, 0.1);
            color: var(--graphite-dark);
            border-bottom-left-radius: 4px;
        }
        
        .message-sender {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--graphite-medium);
        }
        
        .message-time {
            font-size: 0.7rem;
            color: var(--graphite-light);
            margin-top: 4px;
        }
        
        .chat-input-area {
            padding: 16px 20px;
            border-top: 1px solid rgba(61, 61, 61, 0.08);
            background: white;
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid rgba(61, 61, 61, 0.1);
            border-radius: 24px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            resize: none;
            min-height: 48px;
            max-height: 120px;
        }
        
        .send-message-btn {
            background: var(--action-gradient);
            color: var(--graphite-dark);
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        @keyframes fadeInMessage {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á (–ø–æ–ø-–∞–ø –æ–∫–Ω–∞) */
        .tasks-popup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .tasks-popup-content {
            background: white;
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            animation: popupSlideIn 0.3s ease;
        }
        
        @keyframes popupSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .tasks-popup-header {
            padding: 20px;
            background: var(--action-gradient);
            color: var(--graphite-dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .close-popup-btn {
            background: rgba(255, 255, 255, 0.5);
            border: none;
            color: var(--graphite-dark);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .tasks-popup-body {
            padding: 20px;
            max-height: calc(80vh - 80px);
            overflow-y: auto;
        }
        
        .task-quick-item {
            padding: 16px;
            border: 1px solid rgba(61, 61, 61, 0.08);
            border-radius: var(--radius);
            margin-bottom: 12px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ—Ö —É—Å–ª—É–≥ */
        .all-services-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 16px 12px 45px;
            border: 1.5px solid rgba(61, 61, 61, 0.1);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--pastel-pink);
            box-shadow: 0 0 0 3px rgba(242, 221, 230, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--graphite-light);
        }
        
        /* –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
        .square-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            width: 100%;
        }
        
        .category-card-square {
            background: white;
            border-radius: var(--radius-lg);
            padding: 0;
            border: 1px solid rgba(61, 61, 61, 0.08);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            cursor: pointer;
            overflow: hidden;
            height: 280px;
            display: flex;
            flex-direction: column;
        }
        
        .category-card-square:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }
        
        .category-image-container {
            width: 100%;
            height: 160px;
            overflow: hidden;
            position: relative;
        }
        
        .category-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .category-card-square:hover .category-image-container img {
            transform: scale(1.05);
        }
        
        .category-icon-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(255, 255, 255, 0.95);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pastel-pink);
            font-size: 1.2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .category-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .category-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--graphite-dark);
            line-height: 1.3;
        }
        
        .category-description {
            font-size: 0.9rem;
            color: var(--graphite-medium);
            margin-bottom: 16px;
            line-height: 1.4;
            flex: 1;
        }
        
        .category-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .services-count {
            font-size: 0.85rem;
            color: var(--graphite-light);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .select-service-btn {
            color: var(--pastel-pink);
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition-fast);
        }

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
.service-stats-compact {
    background: var(--white);
    border: 1px solid var(--pastel-pink);
    border-radius: var(--radius-lg);
    padding: 20px;
    box-shadow: var(--shadow-sm);
    margin-top: 30px;
}

.stats-grid-compact {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-bottom: 10px;
}

.stat-item-compact {
    text-align: center;
    padding: 12px 8px;
    background: linear-gradient(135deg, rgba(242, 221, 230, 0.05), rgba(232, 204, 217, 0.05));
    border-radius: var(--radius);
    border: 1px solid rgba(242, 221, 230, 0.2);
    transition: var(--transition);
}

.stat-item-compact:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
    border-color: var(--pastel-pink);
}

.stat-number-compact {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--pastel-pink);
    margin-bottom: 5px;
    line-height: 1.2;
}

.stat-title-compact {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--graphite-medium);
    line-height: 1.3;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ */
.btn-sm {
    padding: 8px 16px !important;
    font-size: 0.85rem !important;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
@media (max-width: 480px) {
    .stats-grid-compact {
        grid-template-columns: 1fr;
        gap: 12px;
    }
    
    .stat-item-compact {
        padding: 15px 12px;
    }
    
    .stat-number-compact {
        font-size: 1.6rem;
    }
    
    .stat-title-compact {
        font-size: 0.85rem;
    }
    
    .service-stats-compact {
        padding: 15px;
    }
}

@media (min-width: 481px) and (max-width: 768px) {
    .stats-grid-compact {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
    }
    
    .stat-number-compact {
        font-size: 1.2rem;
    }
    
    .stat-title-compact {
        font-size: 0.7rem;
    }
}
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –∑–∞–¥–∞—á (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) */
        @media (min-width: 769px) {
            .task-table-container {
                display: block;
                overflow-x: auto;
                margin-top: 20px;
            }
            
            .task-history-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                display: table;
            }
            
            .task-history-table th {
                background: rgba(61, 61, 61, 0.05);
                padding: 12px;
                text-align: left;
                font-weight: 600;
                color: var(--graphite-dark);
                border-bottom: 2px solid rgba(61, 61, 61, 0.1);
            }
            
            .task-history-table td {
                padding: 12px;
                border-bottom: 1px solid rgba(61, 61, 61, 0.08);
                vertical-align: top;
            }
            
            .task-history-table tr:hover {
                background: rgba(61, 61, 61, 0.02);
            }
            
            .task-cards-container {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .task-table-container {
                display: none;
            }
            
            .task-cards-container {
                display: block;
            }
            
            .task-card {
                display: block;
                margin-bottom: 16px;
                padding: 16px;
                background: white;
                border-radius: var(--radius);
                border: 1px solid rgba(61, 61, 61, 0.08);
                box-shadow: var(--shadow-sm);
            }
            
            .task-card-row {
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
                padding-bottom: 8px;
                border-bottom: 1px solid rgba(61, 61, 61, 0.05);
            }
            
            .task-card-label {
                font-size: 0.75rem;
                color: var(--graphite-medium);
                font-weight: 500;
            }
            
            .task-card-value {
                font-size: 0.9rem;
                color: var(--graphite-dark);
                font-weight: 500;
                text-align: right;
            }
            
            .task-card-actions {
                display: flex;
                gap: 8px;
                margin-top: 12px;
                justify-content: flex-end;
            }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        .category-image img,
        .service-image img,
        .category-image-container img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            -webkit-user-drag: none;
            user-select: none;
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è iOS */
        @supports (-webkit-touch-callout: none) {
            .category-image img,
            .service-image img,
            .category-image-container img {
                object-fit: cover !important;
            }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏ */
        @media (max-width: 768px) {
            .square-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 15px;
            }
            
            .category-card-square {
                height: 240px;
            }
            
            .category-image-container {
                height: 130px;
            }
            
            .category-content {
                padding: 15px;
            }
            
            .category-title {
                font-size: 1rem;
                margin-bottom: 6px;
            }
            
            .category-description {
                font-size: 0.85rem;
                margin-bottom: 12px;
            }
        }
        
        @media (max-width: 480px) {
            .square-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }
            
            .category-card-square {
                height: 220px;
            }
            
            .category-image-container {
                height: 110px;
            }
            
            .category-content {
                padding: 12px;
            }
        }
        
        /* –¶–≤–µ—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–¥–∞—á */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-new {
            background: rgba(25, 118, 210, 0.1);
            color: #1976D2;
        }
        
        .status-in_progress {
            background: rgba(255, 152, 0, 0.1);
            color: #EF6C00;
        }
        
        .status-completed {
            background: rgba(76, 175, 80, 0.1);
            color: #2E7D32;
        }
        
        .status-cancelled {
            background: rgba(229, 115, 115, 0.1);
            color: #C62828;
        }
        
        .status-searching {
            background: rgba(255, 193, 7, 0.1);
            color: #FF8F00;
        }
        
        .status-assigned {
            background: rgba(33, 150, 243, 0.1);
            color: #1565C0;
        }
    </style>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="top-nav">
        <a href="#" class="logo" onclick="window.navigateToPage('home')">
            <img src="" alt="WOMAN HELP" class="logo-img" id="logoImg">
            <span class="logo-woman">WOMAN</span>
            <span class="logo-help">HELP</span>
            <span class="logo-tagline">–†–µ—à–µ–Ω–∏–µ –µ—Å—Ç—å</span>
        </a>
        
        <div class="user-avatar" id="userAvatar" onclick="window.toggleUserMenu()">
            –ì
        </div>
        
        <div class="user-menu" id="userMenu">
            <div style="padding: 10px; border-bottom: 1px solid rgba(61, 61, 61, 0.1);">
                <div style="font-weight: 600;" id="menuUserName">–ì–æ—Å—Ç—å</div>
                <div style="font-size: 0.9rem; color: var(--graphite-medium);" id="menuUserEmail"></div>
            </div>
            <div style="padding: 5px 0;">
                <a href="#" class="nav-menu-item" onclick="window.navigateToPage('profile')">
                    <i class="fas fa-user"></i>–ü—Ä–æ—Ñ–∏–ª—å
                </a>
                <a href="#" class="nav-menu-item" onclick="window.showTasksPopup()">
                    <i class="fas fa-tasks"></i>–ú–æ–∏ –∑–∞–¥–∞—á–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="window.navigateToPage('guides')">
                    <i class="fas fa-book"></i>–ì–∞–π–¥—ã
                </a>
                <a href="#" class="nav-menu-item" onclick="window.navigateToPage('all-services')">
                    <i class="fas fa-list"></i>–í—Å–µ —É—Å–ª—É–≥–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="window.navigateToPerformerPanel()" id="performerPanelLink" style="display: none;">
                    <i class="fas fa-user-tie"></i>–ü–∞–Ω–µ–ª—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
                </a>
                <a href="#" class="nav-menu-item" onclick="window.showLoginModal()" id="loginMenuBtn">
                    <i class="fas fa-sign-in-alt"></i>–í–æ–π—Ç–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="window.logout()" id="logoutMenuBtn" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>–í—ã–π—Ç–∏
                </a>
            </div>
        </div>
    </nav>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main>
        <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <div id="auth-page" class="page active">
            <div class="container auth-screen">
                <div class="auth-content">
                    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫ auth-card -->
<!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫ auth-card -->
<div class="card auth-card" style="padding: 30px 20px;">
    <div class="logo" style="justify-content: center; margin-bottom: 15px;">
        <img src="" alt="WOMAN HELP" class="logo-img" id="authLogoImg">
        <span class="logo-woman">WOMAN</span>
        <span class="logo-help">HELP</span>
    </div>
    <div class="tagline" style="font-size: 1.2rem; color: var(--pastel-pink); font-weight: 600; margin-bottom: 10px;">
        –†–µ—à–µ–Ω–∏–µ –µ—Å—Ç—å
    </div>
    <p class="section-subtitle" style="font-size: 0.9rem; margin-bottom: 25px;">
        –ü—Ä–µ–º–∏—É–º —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ—â–∏ –¥–ª—è –∂–µ–Ω—â–∏–Ω. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –±—ã—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Å–≤–æ–±–æ–¥–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º.
    </p>
    
    <div class="auth-actions">
        <button class="btn btn-primary" onclick="window.showLoginModal()" style="padding: 12px 20px; font-size: 0.9rem;">
            <i class="fas fa-sign-in-alt"></i>
            –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
        </button>
        <button class="btn btn-secondary" onclick="window.showRegisterModal()" style="padding: 12px 20px; font-size: 0.9rem;">
            <i class="fas fa-user-plus"></i>
            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
        </button>
    </div>

    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –í –†–ê–ú–ö–ï -->
    <div class="service-stats-compact" style="margin-top: 30px;">
        <div class="stats-header" style="text-align: center; margin-bottom: 15px;">
            <h4 style="font-size: 1rem; color: var(--graphite-dark); margin: 0; display: flex; align-items: center; justify-content: center; gap: 8px;">
                <i class="fas fa-chart-line" style="color: var(--pastel-pink);"></i>
                –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
            </h4>
        </div>
        
        <div class="stats-grid-compact">
            <div class="stat-item-compact">
                <div class="stat-number-compact" id="usersCount">10,000+</div>
                <div class="stat-title-compact">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            </div>
            <div class="stat-item-compact">
                <div class="stat-number-compact" id="tasksCount">25,000+</div>
                <div class="stat-title-compact">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
            </div>
            <div class="stat-item-compact">
                <div class="stat-number-compact" id="hoursCount">50,000+</div>
                <div class="stat-title-compact">–ß–∞—Å–æ–≤ —ç–∫–æ–Ω–æ–º–∏–∏</div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(61, 61, 61, 0.1);">
            <button class="btn btn-secondary btn-sm" onclick="window.showHelp()" style="padding: 8px 16px; font-size: 0.85rem;">
                <i class="fas fa-headset"></i>
                –ü–æ–¥–¥–µ—Ä–∂–∫–∞
            </button>
        </div>
    </div>
</div>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏ -->
        <div id="subscription-required-page" class="page">
            <div class="container auth-screen">
                <div class="auth-content">
                    <div class="card auth-card">
                        <i class="fas fa-crown auth-icon"></i>
                        <h2 class="section-title">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞</h2>
                        <p class="section-subtitle">–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</p>
                        
                        <div class="mb-20" style="text-align: left; background: rgba(242, 221, 230, 0.05); padding: 16px; border-radius: var(--radius);">
                            <p style="margin-bottom: 10px;"><i class="fas fa-check" style="color: var(--pastel-pink); margin-right: 8px;"></i> –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á</p>
                            <p style="margin-bottom: 10px;"><i class="fas fa-check" style="color: var(--pastel-pink); margin-right: 8px;"></i> –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —É—Å–ª—É–≥</p>
                            <p style="margin-bottom: 10px;"><i class="fas fa-check" style="color: var(--pastel-pink); margin-right: 8px;"></i> –õ–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ 24/7</p>
                            <p><i class="fas fa-check" style="color: var(--pastel-pink); margin-right: 8px;"></i> –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —É—Å–ª—É–≥</p>
                        </div>
                        
                        <div class="auth-actions">
                            <button class="btn btn-primary" onclick="window.navigateToPage('subscription')">
                                <i class="fas fa-crown"></i>
                                –í—ã–±—Ä–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
                            </button>
                            <button class="btn btn-secondary" onclick="window.logout()">
                                <i class="fas fa-sign-out-alt"></i>
                                –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home-page" class="page">
            <div class="container">
                <!-- Hero —Å–µ–∫—Ü–∏—è -->
                <section class="hero">
                    <div class="hero-content">
                        <h1>WOMAN HELP</h1>
                        <div class="tagline">–†–µ—à–µ–Ω–∏–µ –µ—Å—Ç—å</div>
                        <p>–ü—Ä–µ–º–∏—É–º —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ—â–∏ –¥–ª—è –∂–µ–Ω—â–∏–Ω. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –±—ã—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Å–≤–æ–±–æ–¥–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º.</p>
                        <div class="hero-actions">
                            <button class="btn btn-primary" onclick="window.checkSubscription()">
                                <i class="fas fa-plus-circle"></i>
                                –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                            </button>
                            <button class="btn btn-secondary" onclick="window.navigateToPage('all-services')">
                                <i class="fas fa-list"></i>
                                –í—Å–µ —É—Å–ª—É–≥–∏
                            </button>
                            <button class="btn guides-btn" onclick="window.navigateToPage('guides')">
                                <i class="fas fa-book"></i>
                                –ì–∞–π–¥—ã
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                <section class="section">
                    <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                    <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏</p>
                    
                    <div class="grid grid-2" id="categoriesGrid">
                        <div class="loader" style="grid-column: 1 / -1; text-align: center;">
                            <div class="spinner"></div>
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...</p>
                        </div>
                    </div>
                </section>
                
                <!-- –¢–æ–ø —É—Å–ª—É–≥ -->
                <section class="section">
                    <div class="d-flex justify-between align-center mb-20">
                        <h2 class="section-title">–¢–æ–ø —É—Å–ª—É–≥</h2>
                        <button class="view-all-btn" onclick="window.navigateToPage('all-services')">
                            <i class="fas fa-arrow-right"></i>
                            –í—Å–µ —É—Å–ª—É–≥–∏
                        </button>
                    </div>
                    
                    <div class="grid grid-3" id="topServicesGrid">
                        <!-- –¢–æ–ø —É—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </section>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <section class="section">
                    <div class="card">
                        <h2 class="section-title">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                        <div class="profile-stats" id="homeStats">
                            <div class="stat-item">
                                <div class="stat-value" id="statTasksHome">0</div>
                                <div class="stat-label">–°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞—á</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="statAvailableHome">0</div>
                                <div class="stat-label">–î–æ—Å—Ç—É–ø–Ω–æ –∑–∞–¥–∞—á</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="statCompletedHome">0</div>
                                <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Å–µ—Ö —É—Å–ª—É–≥ -->
        <div id="all-services-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="window.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title" id="servicesPageTitle">–í—Å–µ —É—Å–ª—É–≥–∏</h2>
                    </div>
                    
                    <div class="all-services-header">
                        <div class="search-box">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="serviceSearch" class="search-input" placeholder="–ü–æ–∏—Å–∫ —É—Å–ª—É–≥..." oninput="window.filterServices()">
                        </div>
                        <div>
                            <button class="guides-btn" onclick="window.navigateToPage('guides')">
                                <i class="fas fa-book"></i>
                                –ì–∞–π–¥—ã
                            </button>
                        </div>
                    </div>
                    
                    <div class="square-grid" id="allServicesList">
                        <!-- –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø—Ä–∏ –∫–ª–∏–∫–µ - —É—Å–ª—É–≥–∏ -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px; display: none;" id="backToCategoriesBtn">
                        <button class="btn btn-secondary" onclick="window.loadAllServicesPage()">
                            <i class="fas fa-arrow-left"></i>
                            –ù–∞–∑–∞–¥ –∫–æ –≤—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                        </button>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–∞–π–¥–æ–≤ -->
        <div id="guides-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="window.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ì–∞–π–¥—ã –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h2>
                    </div>
                    
                    <div class="hero" style="margin-bottom: 40px;">
                        <div class="hero-content">
                            <h1>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–Ω–∞–Ω–∏–π</h1>
                            <p>–ü–æ–ª–µ–∑–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å–∞</p>
                        </div>
                    </div>
                    
                    <div class="guides-grid" id="guidesList">
                        <div class="guide-card" onclick="window.showGuide('getting-started')">
                            <i class="fas fa-play-circle guide-icon"></i>
                            <h3>–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã</h3>
                            <p>–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–∏ –∏ —Ä–∞–±–æ—Ç–µ —Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏</p>
                            <div style="color: var(--graphite-light); font-size: 0.9rem;">
                                <i class="far fa-clock"></i> 5 –º–∏–Ω —á—Ç–µ–Ω–∏—è
                            </div>
                        </div>
                        
                        <div class="guide-card" onclick="window.showGuide('tips')">
                            <i class="fas fa-lightbulb guide-icon"></i>
                            <h3>–°–æ–≤–µ—Ç—ã –ø–æ –∑–∞–¥–∞—á–∞–º</h3>
                            <p>–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</p>
                            <div style="color: var(--graphite-light); font-size: 0.9rem;">
                                <i class="far fa-clock"></i> 7 –º–∏–Ω —á—Ç–µ–Ω–∏—è
                            </div>
                        </div>
                        
                        <div class="guide-card" onclick="window.showGuide('safety')">
                            <i class="fas fa-shield-alt guide-icon"></i>
                            <h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
                            <p>–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–µ –¥–æ—Å—Ç—É–ø–∞</p>
                            <div style="color: var(--graphite-light); font-size: 0.9rem;">
                                <i class="far fa-clock"></i> 10 –º–∏–Ω —á—Ç–µ–Ω–∏—è
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
        <div id="create-task-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="window.cancelTask()" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
                    </div>
                    
                    <div class="card">
                        <form id="createTaskForm" class="create-task-form">
                            <div class="form-group">
                                <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <div class="form-input" style="background: #f9f9f9; padding: 12px; border-radius: var(--radius-sm);" id="selectedCategoryDisplay">
                                    –ù–µ –≤—ã–±—Ä–∞–Ω–∞
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">–£—Å–ª—É–≥–∞</label>
                                <div class="form-input" style="background: #f9f9f9; padding: 12px; border-radius: var(--radius-sm);" id="selectedServiceDisplay">
                                    –ù–µ –≤—ã–±—Ä–∞–Ω–∞
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>
                                <input type="text" id="taskTitle" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskDescription">–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ *</label>
                                <textarea id="taskDescription" class="form-input" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskAddress">–ê–¥—Ä–µ—Å *</label>
                                <input type="text" id="taskAddress" class="form-input" placeholder="–ì–¥–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskDeadline">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è *</label>
                                <input type="date" id="taskDeadline" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskContact">–ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —Å–≤—è–∑–∏ *</label>
                                <input type="text" id="taskContact" class="form-input" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Telegram" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="additionalRequirements">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</label>
                                <textarea id="additionalRequirements" class="form-input" rows="2" placeholder="–õ—é–±—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è..."></textarea>
                            </div>
                            
                            <div style="display: flex; gap: 12px; margin-top: 30px;">
                                <button type="button" class="btn btn-secondary" onclick="window.cancelTask()" style="flex: 1;">
                                    –û—Ç–º–µ–Ω–∞
                                </button>
                                <button type="submit" class="btn btn-primary" style="flex: 1;">
                                    –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                                </button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div id="tasks-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="window.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                    </div>
                    
                    <!-- –¢–∞–±—ã -->
                    <div class="tabs" id="tasksTabs">
                        <div class="tab active" onclick="window.filterTasks('all')">–í—Å–µ</div>
                        <div class="tab" onclick="window.filterTasks('new')">–ù–æ–≤—ã–µ</div>
                        <div class="tab" onclick="window.filterTasks('in_progress')">–í —Ä–∞–±–æ—Ç–µ</div>
                        <div class="tab" onclick="window.filterTasks('completed')">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</div>
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∑–∞–¥–∞—á (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
                    <div class="task-cards-container" id="userTasksCards">
                        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –∑–∞–¥–∞—á (–¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) -->
                    <div class="task-table-container" id="userTasksTable">
                        <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –∑–∞–¥–∞—á–∏ -->
        <div id="task-details-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="window.navigateToPage('tasks')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏</h2>
                    </div>
                    
                    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏ -->
                    <div class="card" style="margin-bottom: 20px;">
                        <div id="taskCompactDetails">
                            <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                    
                    <!-- –ß–∞—Ç –≤—Å—Ç—Ä–æ–µ–Ω –ø—Ä—è–º–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
                    <div class="card" id="taskChatSection" style="display: none;">
                        <div class="chat-header">
                            <h3 style="margin: 0; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-comments"></i>
                                <span id="chatHeaderTitle">–ß–∞—Ç –ø–æ –∑–∞–¥–∞—á–µ</span>
                            </h3>
                        </div>
                        
                        <div class="chat-messages-container" id="inlineChatMessages">
                            <!-- –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ -->
                        </div>
                        
                        <div class="chat-input-area">
                            <textarea id="inlineChatMessage" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
                            <button onclick="window.sendInlineChatMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile-page" class="page">
            <div class="container">
                <!-- –®–∞–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="card" style="margin-bottom: 20px; padding: 20px; background: white;">
                    <div style="display: flex; align-items: center; gap: 20px;">
                        <div class="profile-avatar" id="profileAvatar">
                            –ì
                        </div>
                        <div style="flex: 1;">
                            <div class="profile-name" id="profileName">–ì–æ—Å—Ç—å</div>
                            <div class="profile-email" id="profileEmail">–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</div>
                        </div>
                    </div>
                    
                    <div class="profile-stats" id="profileStats">
                        <div class="stat-item" style="background: rgba(61, 61, 61, 0.05);">
                            <div class="stat-value" id="statTasks">0</div>
                            <div class="stat-label">–ó–∞–¥–∞—á</div>
                        </div>
                        <div class="stat-item" style="background: rgba(61, 61, 61, 0.05);">
                            <div class="stat-value" id="statRating">0</div>
                            <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                        </div>
                        <div class="stat-item" style="background: rgba(61, 61, 61, 0.05);">
                            <div class="stat-value" id="statBalance">0‚ÇΩ</div>
                            <div class="stat-label">–ë–∞–ª–∞–Ω—Å</div>
                        </div>
                    </div>
                </div>
                
                <!-- –ü–æ–¥–ø–∏—Å–∫–∞ -->
                <section class="section">
                    <h2 class="section-title">–ü–æ–¥–ø–∏—Å–∫–∞</h2>
                    <div class="card" id="profileSubscriptionCard">
                        <div class="empty-state">
                            <i class="fas fa-crown empty-state-icon"></i>
                            <h3 class="empty-state-title">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞</h3>
                            <p class="empty-state-description">–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º</p>
                            <button class="btn btn-primary" onclick="window.navigateToPage('subscription')">
                                <i class="fas fa-crown"></i>
                                –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- –ú–æ–∏ –∑–∞–¥–∞—á–∏ -->
                <section class="section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
                        <button class="btn btn-secondary" onclick="window.navigateToPage('tasks')">
                            <i class="fas fa-list"></i>
                            –í—Å–µ –∑–∞–¥–∞—á–∏
                        </button>
                    </div>
                    <div class="task-list" id="profileTasksList">
                        <div class="empty-state">
                            <i class="fas fa-tasks empty-state-icon"></i>
                            <h3 class="empty-state-title">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                            <p class="empty-state-description">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É</p>
                        </div>
                    </div>
                </section>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
                <section class="section">
                    <h2 class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <div class="card">
                        <div style="padding: 10px 0;" id="profileSettingsList">
                            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–ø–∏—Å–æ–∫ -->
        <div id="subscription-page" class="page">
            <div class="container subscription-screen">
                <div class="subscription-content">
                    <div class="card" style="padding: 40px 20px;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <i class="fas fa-crown" style="font-size: 3.5rem; color: var(--pastel-pink); margin-bottom: 20px;"></i>
                            <h2 class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É</h2>
                            <p class="section-subtitle">–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</p>
                        </div>
                        
                        <div class="grid grid-2" id="subscriptionSelection">
                            <!-- –ü–æ–¥–ø–∏—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                        
                        <div style="text-align: center; margin-top: 30px;">
                            <p style="color: var(--graphite-medium); font-size: 0.9rem;">
                                <i class="fas fa-info-circle"></i> –í—Å–µ —É—Å–ª—É–≥–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ –ø–æ–¥–ø–∏—Å–∫—É, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav" id="bottomNav" style="display: none;">
        <a href="#" class="nav-item active" onclick="window.navigateToPage('home')" data-page="home">
            <i class="fas fa-home"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="nav-item" onclick="window.navigateToPage('all-services')" data-page="all-services">
            <i class="fas fa-list"></i>
            <span>–£—Å–ª—É–≥–∏</span>
        </a>
        <a href="#" class="nav-item" onclick="window.showTasksPopup()" id="quickTasksBtn">
            <i class="fas fa-tasks"></i>
            <span>–ó–∞–¥–∞—á–∏</span>
        </a>
        <a href="#" class="nav-item" onclick="window.navigateToPage('profile')" data-page="profile">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á -->
    <a href="#" class="quick-tasks-btn" onclick="window.showTasksPopup()" id="floatingTasksBtn" style="display: none;">
        <i class="fas fa-tasks"></i>
    </a>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
    <a href="/admin.html" class="admin-access-btn" id="adminAccessBtn" style="display: none;">
        <i class="fas fa-crown"></i>
    </a>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –ø–∞–Ω–µ–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è -->
    <a href="/performer.html" class="performer-access-btn" id="performerAccessBtn" style="display: none;">
        <i class="fas fa-user-tie"></i>
    </a>
    
    <!-- –ü–æ–ø-–∞–ø –æ–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á -->
    <div class="tasks-popup-modal" id="tasksPopupModal" style="display: none;">
        <div class="tasks-popup-content">
            <div class="tasks-popup-header">
                <h3>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h3>
                <button class="close-popup-btn" onclick="window.closeTasksPopup()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="tasks-popup-body">
                <div id="popupTasksList">
                    <!-- –ó–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h3 class="modal-title">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h3>
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Email</label>
                    <input type="text" id="loginPhoneInput" class="form-input" placeholder="+79991234567 –∏–ª–∏ –≤–∞—à@email.com" required>
                    <small style="color: var(--graphite-light); font-size: 0.8rem;">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</small>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPasswordInput" class="form-input" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    –í–æ–π—Ç–∏
                </button>
            </form>
            <div style="text-align: center; margin-top: 20px;">
                <p style="color: var(--graphite-medium); font-size: 0.9rem;">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
                    <a href="#" onclick="window.showRegisterModal()" style="color: var(--pastel-pink); text-decoration: none; font-weight: 600;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                </p>
                <p style="color: var(--graphite-medium); font-size: 0.9rem; margin-top: 10px;">
                    –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å? 
                    <a href="#" onclick="window.showForgotPasswordModal()" style="color: var(--pastel-pink); text-decoration: none; font-weight: 600;">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</a>
                </p>
            </div>
        </div>
    </div>
    
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <h3 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <form id="registerForm">
                <div class="form-group">
                    <label class="form-label">–ò–º—è *</label>
                    <input type="text" id="registerFirstName" class="form-input" placeholder="–í–∞—à–µ –∏–º—è" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–§–∞–º–∏–ª–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" id="registerLastName" class="form-input" placeholder="–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è">
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" id="registerPhone" class="form-input" placeholder="+7 (999) 123-45-67" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="email" id="registerEmail" class="form-input" placeholder="–≤–∞—à@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å *</label>
                    <input type="password" id="registerPassword" class="form-input" placeholder="–ù–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
            </form>
        </div>
    </div>
    
    <div class="modal" id="forgotPasswordModal">
        <div class="modal-content">
            <h3 class="modal-title">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h3>
            <div id="forgotPasswordContent">
                <p style="color: var(--graphite-medium); margin-bottom: 20px;">
                    –í–≤–µ–¥–∏—Ç–µ email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
                </p>
                <div class="form-group">
                    <label class="form-label">Email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" id="forgotPasswordInput" class="form-input" placeholder="–≤–∞—à@email.com –∏–ª–∏ +7(999)123-45-67" required>
                </div>
                <button type="button" class="btn btn-primary" onclick="window.sendPasswordResetCode()" style="width: 100%; margin-top: 10px;">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="resetPasswordModal">
        <div class="modal-content">
            <h3 class="modal-title">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</h3>
            <div id="resetPasswordContent">
                <p style="color: var(--graphite-medium); margin-bottom: 20px;">
                    –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ –ø–∏—Å—å–º–∞ –∏ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
                </p>
                <div class="form-group">
                    <label class="form-label">–ö–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</label>
                    <input type="text" id="resetCodeInput" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" maxlength="6" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="newPasswordInput" class="form-input" placeholder="–ù–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="confirmPasswordInput" class="form-input" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button type="button" class="btn btn-primary" onclick="window.resetPassword()" style="width: 100%; margin-top: 10px;">
                    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="verifyPhoneModal">
        <div class="modal-content">
            <h3 class="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h3>
            <div id="verifyPhoneContent">
                <p style="color: var(--graphite-medium); margin-bottom: 20px;">
                    –î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
                </p>
                <div class="form-group">
                    <label class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                    <input type="text" id="verifyPhoneNumber" class="form-input" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–æ–¥ –∏–∑ SMS</label>
                    <input type="text" id="verifyPhoneCode" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" maxlength="6">
                </div>
                <button type="button" class="btn btn-primary" onclick="window.verifyPhoneCode()" style="width: 100%; margin-top: 10px;">
                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                </button>
                <button type="button" class="btn btn-secondary" onclick="window.sendVerificationCode()" style="width: 100%; margin-top: 10px;">
                    <i class="fas fa-redo"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –µ—â–µ —Ä–∞–∑
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="sendCodeModal">
        <div class="modal-content">
            <h3 class="modal-title">–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</h3>
            <div id="sendCodeContent">
                <p style="color: var(--graphite-medium); margin-bottom: 20px;">
                    –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                </p>
                <div class="form-group">
                    <label class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                    <input type="tel" id="sendCodePhone" class="form-input" placeholder="+7 (999) 123-45-67">
                </div>
                <button type="button" class="btn btn-primary" onclick="window.sendVerificationCode(true)" style="width: 100%; margin-top: 10px;">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        const app = {
            currentUser: JSON.parse(localStorage.getItem('currentUser')) || null,
            currentToken: localStorage.getItem('token') || null,
            categories: [],
            services: [],
            allServices: [],
            subscriptions: [],
            userTasks: [],
            selectedCategory: null,
            selectedService: null,
            currentTaskFilter: 'all',
            currentChatTaskId: null,
            chatMessages: [],
            chatPollingInterval: null,
            API_BASE_URL: window.location.origin,
            serviceStats: {
                users: 10000,
                tasks: 25000,
                hours: 50000
            }
        };

// ==================== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ====================

function createDefaultLogo() {
    const canvas = document.createElement('canvas');
    canvas.width = 36;
    canvas.height = 36;
    const ctx = canvas.getContext('2d');
    
    // –°–æ–∑–¥–∞–µ–º —Ä–æ–∑–æ–≤–æ-–∑–æ–ª–æ—Ç–æ–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
    const gradient = ctx.createLinearGradient(0, 0, 36, 36);
    gradient.addColorStop(0, '#F2DDE6');  // pastel-pink
    gradient.addColorStop(1, '#C5A880');  // gold-metallic
    
    // –§–æ–Ω
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, 36, 36);
    
    // –°–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã
    ctx.beginPath();
    ctx.roundRect(0, 0, 36, 36, 8);
    ctx.clip();
    
    // –ë—É–∫–≤–∞ W
    ctx.fillStyle = '#FFFFFF';
    ctx.font = 'bold 18px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('W', 18, 18);
    
    return canvas.toDataURL();
}

function setupDefaultImages() {
    // –õ–æ–≥–æ—Ç–∏–ø—ã
    const logoImages = document.querySelectorAll('.logo-img');
    logoImages.forEach(img => {
        if (!img.src || img.src === window.location.href) {
            img.src = createDefaultLogo();
            img.style.borderRadius = '8px';
            img.style.padding = '4px';
        }
    });
    
    // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
    document.querySelectorAll('.category-image').forEach(container => {
        if (!container.querySelector('i')) {
            const icon = document.createElement('i');
            icon.className = 'fas fa-star';
            icon.style.fontSize = '2.5rem';
            icon.style.color = 'var(--pastel-pink)';
            container.appendChild(icon);
        }
    });
    
    // –£—Å–ª—É–≥–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
    document.querySelectorAll('.service-image').forEach(container => {
        if (!container.querySelector('i')) {
            const icon = document.createElement('i');
            icon.className = 'fas fa-concierge-bell';
            icon.style.fontSize = '2rem';
            icon.style.color = 'var(--pastel-pink)';
            container.appendChild(icon);
        }
    });
    
    // –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    document.querySelectorAll('.category-image-container').forEach(container => {
        if (!container.querySelector('i')) {
            const icon = document.createElement('i');
            icon.className = 'fas fa-star';
            icon.style.fontSize = '3rem';
            icon.style.color = 'var(--pastel-pink)';
            icon.style.position = 'absolute';
            icon.style.top = '50%';
            icon.style.left = '50%';
            icon.style.transform = 'translate(-50%, -50%)';
            container.appendChild(icon);
        }
    });
}
        
        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        
      function fetchWithAuth(url, options = {}) {
    if (!app.currentToken && !url.includes('/api/auth/')) {
        return Promise.resolve({
            ok: false,
            status: 401
        });
    }
    
    const headers = {
        'Content-Type': 'application/json',
        ...options.headers
    };
    
    if (app.currentToken) {
        headers['Authorization'] = `Bearer ${app.currentToken}`;
    }
    
    return fetch(url, {
        ...options,
        headers
    }).then(response => {
        if (response.status === 401) {
            if (app.currentToken) {
                localStorage.removeItem('token');
                localStorage.removeItem('currentUser');
                app.currentToken = null;
                app.currentUser = null;
                showNotification('–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞. –í–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞.', 'error');
                setTimeout(() => navigateToPage('auth'), 1000);
            }
        }
        return response;
    }).catch(error => {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error);
        showNotification('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
        return { ok: false };
    });
}
        
      function animateCounters() {
    updateServiceStats();
    ['usersCount', 'tasksCount', 'hoursCount'].forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            animateCounter(element, app.serviceStats[id.replace('Count', '')], 1500);
        }
    });
}

function animateCounter(element, target, duration) {
    let start = 0;
    const increment = target / (duration / 16);
    let current = start;
    
    const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
            current = target;
            clearInterval(timer);
        }
        element.textContent = Math.floor(current).toLocaleString() + '+';
    }, 16);
}
        
        async function updateServiceStats() {
            try {
                const response = await fetch(`${app.API_BASE_URL}/api/admin/dashboard-stats`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.serviceStats.users = result.data.users.total_users || 10000;
                        app.serviceStats.tasks = result.data.tasks.total_tasks || 25000;
                        app.serviceStats.hours = Math.floor((result.data.tasks.total_tasks || 25000) * 2);
                    }
                }
            } catch (error) {
                console.log('–ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É');
            }
        }
        
        async function loadLogo() {
            try {
                const response = await fetch(`${app.API_BASE_URL}/api/logo`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success && result.data.logo_url) {
                        document.querySelectorAll('.logo-img').forEach(img => {
                            img.src = result.data.logo_url;
                        });
                    }
                }
            } catch (error) {
                console.log('–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–≥–æ—Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
            }
        }
        
        function determineInitialScreen() {
            const storedUser = localStorage.getItem('currentUser');
            const storedToken = localStorage.getItem('token');
            
            if (storedUser && storedToken) {
                try {
                    app.currentUser = JSON.parse(storedUser);
                    app.currentToken = storedToken;
                    
                    if (!app.currentUser.phone_verified) {
                        openVerifyPhoneModal(app.currentUser.phone);
                        return;
                    }
                    
                    if (app.currentUser.subscription_status !== 'active' || !app.currentUser.initial_fee_paid) {
                        navigateToPage('subscription');
                        return;
                    }
                    
                    navigateToPage('home');
                } catch (error) {
                    localStorage.clear();
                }
            }
        }
        
        function setupEventListeners() {
            // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await login();
                });
            }
            
            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await register();
                });
            }
            
            // –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
            const taskForm = document.getElementById('createTaskForm');
            if (taskForm) {
                taskForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await createTask();
                });
            }
            
            // –ü–æ–∏—Å–∫ —É—Å–ª—É–≥
            const searchInput = document.getElementById('serviceSearch');
            if (searchInput) {
                searchInput.addEventListener('input', filterServices);
            }
            
            // –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            document.querySelectorAll('input[type="tel"], input[id*="Phone"]:not([id*="Code"])').forEach(input => {
                input.addEventListener('input', function(e) {
                    formatPhoneInput(this);
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤
            document.addEventListener('click', function(event) {
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userMenu = document.getElementById('userMenu');
                const userAvatar = document.getElementById('userAvatar');
                if (userMenu && userMenu.style.display === 'block') {
                    if (!userMenu.contains(event.target) && !userAvatar.contains(event.target)) {
                        userMenu.style.display = 'none';
                    }
                }
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
                document.querySelectorAll('.modal.active').forEach(modal => {
                    if (event.target === modal) {
                        closeModal(modal.id);
                    }
                });
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–ø-–∞–ø –æ–∫–Ω–∞
                const popupModal = document.getElementById('tasksPopupModal');
                if (popupModal && event.target === popupModal) {
                    closeTasksPopup();
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeAllModals();
                    closeUserMenu();
                    closeTasksPopup();
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ —á–∞—Ç–µ
            const chatInput = document.getElementById('inlineChatMessage');
            if (chatInput) {
                chatInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendInlineChatMessage();
                    }
                });
            }
        }
        
        function formatPhoneInput(input) {
            let value = input.value.replace(/\D/g, '');
            
            if (value.length > 0) {
                if (value.startsWith('7') || value.startsWith('8')) {
                    if (value.length === 1) {
                        input.value = '+7';
                    } else if (value.length <= 4) {
                        input.value = '+7 (' + value.substring(1, 4);
                    } else if (value.length <= 7) {
                        input.value = '+7 (' + value.substring(1, 4) + ') ' + value.substring(4, 7);
                    } else if (value.length <= 9) {
                        input.value = '+7 (' + value.substring(1, 4) + ') ' + value.substring(4, 7) + '-' + value.substring(7, 9);
                    } else {
                        input.value = '+7 (' + value.substring(1, 4) + ') ' + value.substring(4, 7) + '-' + value.substring(7, 9) + '-' + value.substring(9, 11);
                    }
                } else if (value.startsWith('9')) {
                    if (value.length <= 3) {
                        input.value = '+7 (' + value.substring(0, 3);
                    } else if (value.length <= 6) {
                        input.value = '+7 (' + value.substring(0, 3) + ') ' + value.substring(3, 6);
                    } else if (value.length <= 8) {
                        input.value = '+7 (' + value.substring(0, 3) + ') ' + value.substring(3, 6) + '-' + value.substring(6, 8);
                    } else {
                        input.value = '+7 (' + value.substring(0, 3) + ') ' + value.substring(3, 6) + '-' + value.substring(6, 8) + '-' + value.substring(8, 10);
                    }
                }
            }
        }
        
        function normalizePhone(phone) {
            if (!phone) return '';
            let cleaned = phone.replace(/[^\d]/g, '');
            
            if (/^[78]\d{10}$/.test(cleaned)) {
                return '+7' + cleaned.substring(1);
            } else if (/^9\d{9}$/.test(cleaned)) {
                return '+7' + cleaned;
            } else if (cleaned.startsWith('7') || cleaned.startsWith('8')) {
                return '+' + cleaned;
            }
            return phone;
        }
        
      async function loadCategories() {
    try {
        const response = await fetch(`${app.API_BASE_URL}/api/categories`);
        if (response.ok) {
            const result = await response.json();
            if (result.success) {
                app.categories = result.data.categories;
                return app.categories;
            }
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', error);
        // Fallback –¥–∞–Ω–Ω—ã–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏
        app.categories = [
            { 
                id: 1, 
                name: "home", 
                display_name: "–î–æ–º –∏ –±—ã—Ç", 
                description: "–£–±–æ—Ä–∫–∞, —Ä–µ–º–æ–Ω—Ç, –ø–æ–º–æ—â—å –ø–æ —Ö–æ–∑—è–π—Å—Ç–≤—É", 
                icon: "fas fa-home", 
                services_count: 8,
                image_url: null 
            },
            { 
                id: 2, 
                name: "family", 
                display_name: "–°–µ–º—å—è –∏ –¥–µ—Ç–∏", 
                description: "–ù—è–Ω–∏, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã, –ø–æ–º–æ—â—å —Å –¥–µ—Ç—å–º–∏", 
                icon: "fas fa-child", 
                services_count: 6,
                image_url: null 
            },
            { 
                id: 3, 
                name: "beauty", 
                display_name: "–ö—Ä–∞—Å–æ—Ç–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ", 
                description: "–ú–∞–Ω–∏–∫—é—Ä, –ø–∞—Ä–∏–∫–º–∞—Ö–µ—Ä, –º–∞—Å—Å–∞–∂ –Ω–∞ –¥–æ–º—É", 
                icon: "fas fa-spa", 
                services_count: 5,
                image_url: null 
            },
            { 
                id: 4, 
                name: "education", 
                display_name: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ", 
                description: "–†–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã, –∫—É—Ä—Å—ã, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º", 
                icon: "fas fa-graduation-cap", 
                services_count: 4,
                image_url: null 
            }
        ];
    } finally {
        // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        setupDefaultImages();
    }
    
    return app.categories;
}
        
        async function loadAllServices() {
            try {
                const response = await fetch(`${app.API_BASE_URL}/api/services`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.allServices = result.data.services;
                        return app.allServices;
                    }
                }
             } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥:', error);
        // ... fallback –¥–∞–Ω–Ω—ã–µ ...
    } finally {
        // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        setupDefaultImages();
    }
    
    return app.allServices;
}
            
            // Fallback –¥–∞–Ω–Ω—ã–µ
            app.allServices = [
                { id: 1, name: "–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã", description: "–ü–æ–ª–Ω–∞—è —É–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ö–∏–º–∏–∏", category_name: "–î–æ–º –∏ –±—ã—Ç", category_id: 1, icon: "fas fa-broom" },
                { id: 2, name: "–ì–ª–∞–∂–∫–∞ –±–µ–ª—å—è", description: "–ê–∫–∫—É—Ä–∞—Ç–Ω–∞—è –≥–ª–∞–∂–∫–∞ –≤–µ—â–µ–π —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Ç–∫–∞–Ω—è–º", category_name: "–î–æ–º –∏ –±—ã—Ç", category_id: 1, icon: "fas fa-tshirt" }
            ];
            return app.allServices;
        }
        
       async function loadAllServicesPage() {
    try {
        await loadAllServices();
        if (app.selectedCategory) {
            app.services = app.allServices.filter(service => service.category_id === app.selectedCategory.id);
            renderServicesInCategory(); // –ò–ó–ú–ï–ù–ò–¢–ï –≠–¢–£ –°–¢–†–û–ö–£
        } else {
            app.services = app.allServices;
            renderAllServices();
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É—Å–ª—É–≥:', error);
        showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥', 'error');
    }
}
        
        function renderAllCategoriesForServices() {
            const container = document.getElementById('allServicesList');
            if (!container) return;
            
            if (!app.categories || app.categories.length === 0) {
                container.innerHTML = `<div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                    <p style="color: var(--graphite-medium);">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>`;
                return;
            }
            
            container.className = 'square-grid';
            container.innerHTML = '';
            
            app.categories.forEach(category => {
                const card = document.createElement('div');
                card.className = 'category-card-square';
                card.onclick = () => selectCategoryForServices(category);
                
card.innerHTML = `
    <div class="category-image-container">
        <!-- –£–±—Ä–∞–ª–∏ –ª–∏—à–Ω–∏–π div, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫—É —á–µ—Ä–µ–∑ CSS -->
        <div class="category-icon-badge">
            <i class="${category.icon || 'fas fa-star'}"></i>
        </div>
    </div>
    <div class="category-content">
        <h3 class="category-title">${category.display_name}</h3>
        <p class="category-description">${category.description}</p>
        <div class="category-footer">
            <span class="services-count">
                <i class="fas fa-list"></i>
                ${category.services_count || 0} —É—Å–ª—É–≥
            </span>
            <span class="select-service-btn">
                –í—ã–±—Ä–∞—Ç—å <i class="fas fa-arrow-right"></i>
            </span>
        </div>
    </div>
`;
                
                container.appendChild(card);
            });
            
            document.getElementById('backToCategoriesBtn').style.display = 'none';
            document.getElementById('servicesPageTitle').textContent = '–í—Å–µ —É—Å–ª—É–≥–∏';
            app.selectedCategory = null;
        }
        
        async function selectCategoryForServices(category) {
            if (!app.currentUser) {
                showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—Å–ª—É–≥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'warning');
                showLoginModal();
                return;
            }
            
            if (app.currentUser.subscription_status !== 'active' || !app.currentUser.initial_fee_paid) {
                showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —É—Å–ª—É–≥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', 'warning');
                navigateToPage('subscription-required');
                return;
            }
            
            app.selectedCategory = category;
            
            try {
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/categories/${category.id}/services`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.services = result.data.services;
                        renderServicesInCategory();
                        return;
                    }
                }
                
                // Fallback
                app.services = app.allServices.filter(service => service.category_id === category.id);
                renderServicesInCategory();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥', 'error');
            }
        }
        
        function renderServicesInCategory() {
            const container = document.getElementById('allServicesList');
            const pageTitle = document.querySelector('#all-services-page .section-title');
            
            if (!container) return;
            
            if (!app.services || app.services.length === 0) {
                container.className = 'square-grid';
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; justify-content: center;">
                            <button class="btn btn-secondary" onclick="loadAllServicesPage()" style="padding: 8px 16px;">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <h3 style="font-size: 1.2rem;">${app.selectedCategory.display_name}</h3>
                        </div>
                        <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                        <p style="color: var(--graphite-medium);">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç —É—Å–ª—É–≥</p>
                        <button class="btn btn-primary" onclick="loadAllServicesPage()" style="margin-top: 20px;">
                            <i class="fas fa-arrow-left"></i>
                            –ù–∞–∑–∞–¥ –∫–æ –≤—Å–µ–º —É—Å–ª—É–≥–∞–º
                        </button>
                    </div>
                `;
                return;
            }
            
            if (pageTitle) {
                pageTitle.textContent = app.selectedCategory.display_name;
            }
            
            container.className = 'square-grid';
            container.innerHTML = `
                <div style="grid-column: 1 / -1; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <button class="btn btn-secondary" onclick="loadAllServicesPage()" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h3 style="font-size: 1.5rem; font-weight: 600;">${app.selectedCategory.display_name}</h3>
                        <span style="margin-left: auto; color: var(--graphite-medium); font-size: 0.9rem;">
                            ${app.services.length} —É—Å–ª—É–≥
                        </span>
                    </div>
                    <p style="color: var(--graphite-medium); margin-bottom: 20px; padding-left: 48px;">
                        ${app.selectedCategory.description}
                    </p>
                </div>
            `;
            
            app.services.forEach(service => {
                const card = document.createElement('div');
                card.className = 'category-card-square';
                card.onclick = () => selectService(service);
                
               card.innerHTML = `
    <div class="category-image-container">
        <!-- –£–±—Ä–∞–ª–∏ –ª–∏—à–Ω–∏–π div -->
        <div class="category-icon-badge">
            <i class="${service.icon || app.selectedCategory.icon || 'fas fa-star'}"></i>
        </div>
    </div>
    <div class="category-content">
        <h3 class="category-title">${service.name}</h3>
        <p class="category-description">${service.description}</p>
        <div class="category-footer">
            <span class="services-count">
                <i class="fas fa-crown" style="color: var(--gold-metallic);"></i>
                –í–∫–ª—é—á–µ–Ω–æ –≤ –ø–æ–¥–ø–∏—Å–∫—É
            </span>
            <span class="select-service-btn">
                –í—ã–±—Ä–∞—Ç—å <i class="fas fa-arrow-right"></i>
            </span>
        </div>
    </div>
`;
                container.appendChild(card);
            });
            
            document.getElementById('backToCategoriesBtn').style.display = 'block';
            document.getElementById('servicesPageTitle').textContent = app.selectedCategory.display_name;
        }
        
        function renderAllServices() {
            const container = document.getElementById('allServicesList');
            const pageTitle = document.getElementById('servicesPageTitle');
            
            if (!container) return;
            
            if (!app.services || app.services.length === 0) {
                container.className = 'square-grid';
                container.innerHTML = `<div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                    <p style="color: var(--graphite-medium);">–£—Å–ª—É–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>`;
                return;
            }
            
            if (pageTitle) {
                pageTitle.textContent = '–í—Å–µ —É—Å–ª—É–≥–∏';
            }
            
            container.className = 'square-grid';
            container.innerHTML = '';
            
            app.services.forEach(service => {
                const card = document.createElement('div');
                card.className = 'category-card-square';
                card.onclick = () => selectService(service);
                
                card.innerHTML = `
                    <div class="category-image-container">
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, var(--pink-light), var(--pastel-pink)); display: flex; align-items: center; justify-content: center;">
                            <i class="${service.icon || 'fas fa-star'}" style="font-size: 2.5rem; color: var(--pastel-pink);"></i>
                        </div>
                        <div class="category-icon-badge">
                            <i class="${service.icon || 'fas fa-star'}"></i>
                        </div>
                    </div>
                    <div class="category-content">
                        <h3 class="category-title">${service.name}</h3>
                        <p class="category-description">${service.description}</p>
                        <div class="category-footer">
                            <span class="services-count">
                                <i class="fas fa-tag" style="color: var(--graphite-light);"></i>
                                ${service.category_name}
                            </span>
                            <span class="select-service-btn">
                                –í—ã–±—Ä–∞—Ç—å <i class="fas fa-arrow-right"></i>
                            </span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
            
            document.getElementById('backToCategoriesBtn').style.display = 'none';
            app.selectedCategory = null;
        }
        
        function filterServices() {
            const searchInput = document.getElementById('serviceSearch');
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            const container = document.getElementById('allServicesList');
            if (!container) return;
            
            if (!app.services || app.services.length === 0) return;
            
            let filteredServices = app.services;
            
            if (searchTerm) {
                filteredServices = app.services.filter(service => 
                    service.name.toLowerCase().includes(searchTerm) ||
                    service.description.toLowerCase().includes(searchTerm) ||
                    (service.category_name && service.category_name.toLowerCase().includes(searchTerm))
                );
            }
            
            if (filteredServices.length === 0) {
                container.innerHTML = `
                    <div class="card" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <i class="fas fa-search" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                        <p style="color: var(--graphite-medium);">–ü–æ –∑–∞–ø—Ä–æ—Å—É "${searchTerm}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
                        <button class="btn btn-primary" onclick="clearSearch()" style="margin-top: 20px;">
                            <i class="fas fa-times"></i>
                            –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫
                        </button>
                    </div>
                `;
                return;
            }
            
            app.services = filteredServices;
            if (app.selectedCategory) {
                renderServicesInCategory();
            } else {
                renderAllServices();
            }
        }
        
        function clearSearch() {
            const searchInput = document.getElementById('serviceSearch');
            searchInput.value = '';
            loadAllServicesPage();
        }
        
        // ==================== –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê ====================
        
        function renderHomeCategories() {
            const container = document.getElementById('categoriesGrid');
            if (!container) return;
            
            const homeCategories = app.categories.slice(0, 4);
            
            if (homeCategories.length === 0) {
                container.innerHTML = `<div class="card" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                    <p style="color: var(--graphite-medium);">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>`;
                return;
            }
            
            container.innerHTML = '';
            homeCategories.forEach(category => {
                const card = document.createElement('div');
                card.className = 'card category-card';
                card.onclick = () => selectCategory(category);
                
                card.innerHTML = `
                    <div class="category-image">
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; 
                             background: linear-gradient(135deg, var(--pink-light), var(--pastel-pink));">
                            <i class="${category.icon}" style="font-size: 2.5rem; color: var(--pastel-pink);"></i>
                        </div>
                    </div>
                    <h3>${category.display_name}</h3>
                    <p>${category.description}</p>
                    <span class="service-price"><i class="fas fa-crown"></i> –í–∫–ª—é—á–µ–Ω–æ –≤ –ø–æ–¥–ø–∏—Å–∫—É</span>
                `;
                container.appendChild(card);
            });
        }
        
        async function selectCategory(category) {
            if (!app.currentUser) {
                showNotification('–î–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'warning');
                showLoginModal();
                return;
            }
            
            if (app.currentUser.subscription_status !== 'active' || !app.currentUser.initial_fee_paid) {
                showNotification('–î–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', 'warning');
                navigateToPage('subscription-required');
                return;
            }
            
            app.selectedCategory = category;
            navigateToPage('all-services');
            selectCategoryForServices(category);
        }
        
        async function loadHomePage() {
            try {
                await loadCategories();
                renderHomeCategories();
                await loadTopServices();
                updateHomeStats();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã', 'error');
            }
        }
        
        // ==================== –£–°–õ–£–ì–ò ====================
        
        async function loadTopServices() {
            try {
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/services/top`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        renderTopServices(result.data.services);
                        return;
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–ø —É—Å–ª—É–≥:', error);
            }
            
            // Fallback –¥–∞–Ω–Ω—ã–µ
            const topServicesData = [
                { id: 1, name: "–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã", description: "–ü–æ–ª–Ω–∞—è —É–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ö–∏–º–∏–∏", category_name: "–î–æ–º –∏ –±—ã—Ç", icon: "fas fa-broom" },
                { id: 2, name: "–ù—è–Ω—è –Ω–∞ –¥–µ–Ω—å", description: "–ü—Ä–∏—Å–º–æ—Ç—Ä –∑–∞ —Ä–µ–±–µ–Ω–∫–æ–º –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è, —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∑–∞–Ω—è—Ç–∏—è", category_name: "–°–µ–º—å—è –∏ –¥–µ—Ç–∏", icon: "fas fa-baby" },
                { id: 3, name: "–ú–∞–Ω–∏–∫—é—Ä –Ω–∞ –¥–æ–º—É", description: "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –Ω–æ–≥—Ç—è–º–∏ –∏ –∫–æ–∂–µ–π —Ä—É–∫", category_name: "–ö—Ä–∞—Å–æ—Ç–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ", icon: "fas fa-hand-sparkles" }
            ];
            renderTopServices(topServicesData);
        }
        
        function renderTopServices(services) {
            const container = document.getElementById('topServicesGrid');
            if (!container) return;
            
            if (!services || services.length === 0) {
                container.innerHTML = `<div class="card" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                    <p style="color: var(--graphite-medium);">–£—Å–ª—É–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>`;
                return;
            }
            
            container.innerHTML = '';
            services.forEach(service => {
                const card = document.createElement('div');
                card.className = 'card service-card';
                card.onclick = () => selectService(service);
                
                card.innerHTML = `
                    <div class="service-image">
                        <i class="${service.icon || 'fas fa-star'}"></i>
                    </div>
                    <div class="service-header">
                        <h4>${service.name}</h4>
                        <span style="font-size: 0.8rem; color: var(--gold-metallic);">
                            <i class="fas fa-star"></i> –¢–æ–ø
                        </span>
                    </div>
                    <p class="service-description">${service.description}</p>
                    <div class="service-footer">
                        <span class="service-price"><i class="fas fa-crown"></i> –í–∫–ª—é—á–µ–Ω–æ –≤ –ø–æ–¥–ø–∏—Å–∫—É</span>
                        <span style="color: var(--pastel-pink); font-weight: 600; font-size: 0.9rem;">
                            –í—ã–±—Ä–∞—Ç—å
                        </span>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        function selectService(service) {
            if (!app.currentUser) {
                showNotification('–î–ª—è –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'warning');
                showLoginModal();
                return;
            }
            
            if (app.currentUser.subscription_status !== 'active' || !app.currentUser.initial_fee_paid) {
                showNotification('–î–ª—è –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', 'warning');
                navigateToPage('subscription-required');
                return;
            }
            
            app.selectedService = service;
            navigateToPage('create-task');
            updateTaskForm();
        }
        
        // ==================== –°–¢–ê–¢–ò–°–¢–ò–ö–ê ====================
        
        function updateHomeStats() {
            if (!app.currentUser) return;
            
            const statTasksHome = document.getElementById('statTasksHome');
            const statAvailableHome = document.getElementById('statAvailableHome');
            const statCompletedHome = document.getElementById('statCompletedHome');
            
            if (statTasksHome) statTasksHome.textContent = app.currentUser.tasks_used || '0';
            if (statAvailableHome) {
                const available = (app.currentUser.tasks_limit || 0) - (app.currentUser.tasks_used || 0);
                statAvailableHome.textContent = available > 0 ? available : '0';
            }
            if (statCompletedHome) statCompletedHome.textContent = app.currentUser.completed_tasks || '0';
        }
        
        // ==================== –°–û–ó–î–ê–ù–ò–ï –ó–ê–î–ê–ß–ò ====================
        
        function checkSubscription() {
            if (!app.currentUser) {
                showNotification('–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'warning');
                showLoginModal();
                return;
            }
            
            if (app.currentUser.subscription_status !== 'active' || !app.currentUser.initial_fee_paid) {
                navigateToPage('subscription-required');
            } else {
                navigateToPage('all-services');
            }
        }
        
        function updateTaskForm() {
            if (app.selectedCategory) {
                const categoryDisplay = document.getElementById('selectedCategoryDisplay');
                if (categoryDisplay) {
                    categoryDisplay.textContent = app.selectedCategory.display_name;
                    categoryDisplay.style.color = 'var(--graphite-dark)';
                }
            }
            
            if (app.selectedService) {
                const serviceDisplay = document.getElementById('selectedServiceDisplay');
                if (serviceDisplay) {
                    serviceDisplay.textContent = app.selectedService.name;
                    serviceDisplay.style.color = 'var(--graphite-dark)';
                }
            }
            
            const contactInput = document.getElementById('taskContact');
            if (contactInput && app.currentUser && app.currentUser.phone) {
                contactInput.value = app.currentUser.phone;
            }
            
            const deadlineInput = document.getElementById('taskDeadline');
            if (deadlineInput) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                deadlineInput.value = tomorrow.toISOString().split('T')[0];
            }
        }
        
        function cancelTask() {
            app.selectedCategory = null;
            app.selectedService = null;
            
            const taskForm = document.getElementById('createTaskForm');
            if (taskForm) taskForm.reset();
            
            const categoryDisplay = document.getElementById('selectedCategoryDisplay');
            if (categoryDisplay) {
                categoryDisplay.textContent = '–ù–µ –≤—ã–±—Ä–∞–Ω–∞';
                categoryDisplay.style.color = 'var(--graphite-medium)';
            }
            
            const serviceDisplay = document.getElementById('selectedServiceDisplay');
            if (serviceDisplay) {
                serviceDisplay.textContent = '–ù–µ –≤—ã–±—Ä–∞–Ω–∞';
                serviceDisplay.style.color = 'var(--graphite-medium)';
            }
            
            navigateToPage('home');
        }
        
        async function createTask() {
            if (!app.currentUser) {
                showNotification('–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'error');
                return;
            }
            
            if (app.currentUser.subscription_status !== 'active' || !app.currentUser.initial_fee_paid) {
                showNotification('–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞', 'error');
                navigateToPage('subscription-required');
                return;
            }
            
            const taskTitle = document.getElementById('taskTitle')?.value;
            const taskDescription = document.getElementById('taskDescription')?.value;
            const taskAddress = document.getElementById('taskAddress')?.value;
            const taskDeadline = document.getElementById('taskDeadline')?.value;
            const taskContact = document.getElementById('taskContact')?.value;
            const additionalRequirements = document.getElementById('additionalRequirements')?.value;
            
            if (!taskTitle || !taskDescription || !taskAddress || !taskDeadline || !taskContact) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            let autoCategoryId = app.selectedCategory?.id;
            if (!autoCategoryId) {
                const textForAnalysis = (taskTitle + ' ' + taskDescription).toLowerCase();
                const categoryKeywords = {
                    '—É–±–æ—Ä–∫': 1, '—á–∏—Å—Ç–∫': 1, '–º—ã—Ç—å': 1, '—Å—Ç–∏—Ä–∫': 1, '–≥–ª–∞–∂–∫': 1,
                    '–Ω—è–Ω': 2, '—Ä–µ–±–µ–Ω': 2, '–¥–µ—Ç': 2, '–ø—Ä–∏—Å–º–æ—Ç—Ä': 2,
                    '–º–∞–Ω–∏–∫—é—Ä': 3, '–ø–µ–¥–∏–∫—é—Ä': 3, '—Å—Ç—Ä–∏–∂–∫': 3, '–º–∞—Å—Å–∞–∂': 3,
                    '—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä': 4, '—É—á–µ–±': 4, '–∑–∞–Ω—è—Ç': 4, '–æ–±—É—á–µ–Ω': 4
                };
                
                for (const [keyword, categoryId] of Object.entries(categoryKeywords)) {
                    if (textForAnalysis.includes(keyword)) {
                        autoCategoryId = categoryId;
                        break;
                    }
                }
                
                if (!autoCategoryId && app.categories.length > 0) {
                    autoCategoryId = app.categories[0].id;
                }
            }
            
            if (!autoCategoryId) {
                showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤—Ä—É—á–Ω—É—é.', 'error');
                return;
            }
            
            const deadlineDate = new Date(taskDeadline);
            if (deadlineDate < new Date()) {
                showNotification('–î–∞—Ç–∞ –¥–µ–¥–ª–∞–π–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º', 'error');
                return;
            }
            
            try {
                showLoading('–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏...');
                
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/tasks`, {
                    method: 'POST',
                    body: JSON.stringify({
                        title: taskTitle,
                        description: taskDescription,
                        category_id: autoCategoryId,
                        service_id: app.selectedService?.id || null,
                        priority: 'medium',
                        deadline: taskDeadline,
                        address: taskAddress,
                        contact_info: taskContact,
                        additional_requirements: additionalRequirements || ''
                    })
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏');
                
                showNotification('–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞! –ú—ã –∏—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â—É—é –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü—É.', 'success');
                
                if (app.currentUser.tasks_used) {
                    app.currentUser.tasks_used = parseInt(app.currentUser.tasks_used) + 1;
                } else {
                    app.currentUser.tasks_used = 1;
                }
                
                localStorage.setItem('currentUser', JSON.stringify(app.currentUser));
                
                updateUserInterface();
                updateHomeStats();
                cancelTask();
                
                setTimeout(() => {
                    showNotification('–ó–∞–¥–∞—á–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ —É–≤–∏–¥—è—Ç –µ—ë –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–¥–∞—á.', 'info');
                }, 3000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏:', error);
                showNotification(error.message || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏', 'error');
            } finally {
                hideLoading();
            }
        }
        
        // ==================== –ü–û–î–ü–ò–°–ö–ò ====================
        
        async function loadSubscriptions() {
            try {
                const response = await fetch(`${app.API_BASE_URL}/api/subscriptions`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.subscriptions = result.data.subscriptions;
                        return app.subscriptions;
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫:', error);
            }
            
            // Fallback –¥–∞–Ω–Ω—ã–µ
            app.subscriptions = [
                {
                    id: 1, name: "essential", display_name: "–≠—Å—Å–µ–Ω—à–ª", description: "–ë–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä —É—Å–ª—É–≥ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á",
                    price_monthly: 2990, initial_fee: 2000, is_popular: false,
                    features: ["10 –∑–∞–¥–∞—á –≤ –º–µ—Å—è—Ü", "–ë–∞–∑–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥", "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —á–∞—Ç–µ", "–†–µ–π—Ç–∏–Ω–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π"]
                },
                {
                    id: 2, name: "premium", display_name: "–ü—Ä–µ–º–∏—É–º", description: "–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º —Å–µ—Ä–≤–∏—Å–∞",
                    price_monthly: 5990, initial_fee: 3000, is_popular: true,
                    features: ["–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á", "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥", "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7", "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫"]
                }
            ];
            return app.subscriptions;
        }
        
        async function loadSubscriptionPage() {
            try {
                await loadSubscriptions();
                renderSubscriptions();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–ø–∏—Å–æ–∫:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫', 'error');
            }
        }
        
        function renderSubscriptions() {
            const subscriptionContainer = document.getElementById('subscriptionSelection');
            if (!subscriptionContainer) return;
            
            if (!app.subscriptions || app.subscriptions.length === 0) {
                subscriptionContainer.innerHTML = `<div class="card" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                    <p style="color: var(--graphite-medium);">–ü–æ–¥–ø–∏—Å–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>`;
                return;
            }
            
            subscriptionContainer.innerHTML = '';
            app.subscriptions.forEach(sub => {
                const card = document.createElement('div');
                card.className = `card subscription-card ${sub.is_popular ? 'popular' : ''}`;
                
                if (sub.is_popular) {
                    card.innerHTML += '<div class="popular-badge">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>';
                }
                
                card.innerHTML += `
                    <h3>${sub.display_name}</h3>
                    <p style="color: var(--graphite-medium); margin-bottom: 15px;">${sub.description}</p>
                    <div class="subscription-price">${formatNumber(sub.price_monthly)}<span>‚ÇΩ/–º–µ—Å</span></div>
                    <div style="color: var(--graphite-light); font-size: 0.9rem; margin-bottom: 15px;">
                        –í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å: ${formatNumber(sub.initial_fee)}‚ÇΩ
                    </div>
                    <ul class="subscription-features">
                        ${sub.features.map(feature => `<li><i class="fas fa-check"></i> ${feature}</li>`).join('')}
                    </ul>
                    <button class="btn ${sub.is_popular ? 'btn-primary' : 'btn-secondary'}" style="width: 100%; margin-top: 20px;" onclick="selectSubscription('${sub.name}')">
                        ${app.currentUser && app.currentUser.subscription_plan === sub.name ? '–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ' : '–í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ'}
                    </button>
                `;
                
                subscriptionContainer.appendChild(card);
            });
        }
        
        async function selectSubscription(subscriptionName) {
            if (!app.currentUser) {
                showNotification('–î–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'error');
                showLoginModal();
                return;
            }
            
            if (!app.currentToken) {
                showNotification('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. –í–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞.', 'error');
                showLoginModal();
                return;
            }
            
            if (!app.currentUser.phone_verified) {
                showNotification('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω', 'error');
                openVerifyPhoneModal(app.currentUser.phone);
                return;
            }
            
            try {
                showLoading('–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏...');
                
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/subscriptions/select`, {
                    method: 'POST',
                    body: JSON.stringify({
                        subscription_plan: subscriptionName
                    })
                });
                
                if (!response) return;
                if (!response.ok) throw new Error(`–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error || '–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏');
                
                if (result.data.user) {
                    app.currentUser = result.data.user;
                    localStorage.setItem('currentUser', JSON.stringify(app.currentUser));
                    
                    if (result.data.demo_mode) {
                        showNotification('–ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
                        setTimeout(() => {
                            navigateToPage('home');
                            showNotification('–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏!', 'success');
                        }, 1000);
                        return;
                    }
                }
                
                showNotification('–ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!', 'success');
                updateUserInterface();
                
                setTimeout(() => {
                    navigateToPage('home');
                }, 1000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–¥–ø–∏—Å–∫–∏:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        // ==================== –ü–†–û–§–ò–õ–¨ ====================
        
        function updateUserInterface() {
            const userAvatar = document.getElementById('userAvatar');
            const profileAvatar = document.getElementById('profileAvatar');
            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');
            const menuUserName = document.getElementById('menuUserName');
            const menuUserEmail = document.getElementById('menuUserEmail');
            const loginMenuBtn = document.getElementById('loginMenuBtn');
            const logoutMenuBtn = document.getElementById('logoutMenuBtn');
            const adminAccessBtn = document.getElementById('adminAccessBtn');
            const performerAccessBtn = document.getElementById('performerAccessBtn');
            const performerPanelLink = document.getElementById('performerPanelLink');
            const bottomNav = document.getElementById('bottomNav');
            const floatingBtn = document.getElementById('floatingTasksBtn');
            
            if (app.currentUser) {
                const firstLetter = app.currentUser.first_name ? app.currentUser.first_name.charAt(0).toUpperCase() : '–ì';
                
                if (userAvatar) userAvatar.textContent = firstLetter;
                if (profileAvatar) profileAvatar.textContent = firstLetter;
                if (profileName) profileName.textContent = app.currentUser.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                if (profileEmail) profileEmail.textContent = app.currentUser.email || '';
                if (menuUserName) menuUserName.textContent = app.currentUser.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                if (menuUserEmail) menuUserEmail.textContent = app.currentUser.email || '';
                
                if (loginMenuBtn) loginMenuBtn.style.display = 'none';
                if (logoutMenuBtn) logoutMenuBtn.style.display = 'block';
                
                const shouldShowNav = app.currentUser && 
                                      app.currentUser.phone_verified && 
                                      app.currentUser.subscription_status === 'active' && 
                                      app.currentUser.initial_fee_paid;
                
                if (bottomNav) bottomNav.style.display = shouldShowNav ? 'flex' : 'none';
                if (floatingBtn) floatingBtn.style.display = shouldShowNav ? 'flex' : 'none';
                
                if (adminAccessBtn && (app.currentUser.role === 'admin' || app.currentUser.role === 'superadmin' || app.currentUser.role === 'manager')) {
                    adminAccessBtn.style.display = 'flex';
                }
                
                if (performerAccessBtn && app.currentUser.role === 'performer') {
                    performerAccessBtn.style.display = 'flex';
                }
                
                if (performerPanelLink && (app.currentUser.role === 'performer' || app.currentUser.role === 'admin' || app.currentUser.role === 'superadmin' || app.currentUser.role === 'manager')) {
                    performerPanelLink.style.display = 'block';
                }
                
                updateProfileStats();
                updateProfileSubscriptionCard();
                updateProfileSettings();
                
            } else {
                if (userAvatar) userAvatar.textContent = '–ì';
                if (profileAvatar) profileAvatar.textContent = '–ì';
                if (profileName) profileName.textContent = '–ì–æ—Å—Ç—å';
                if (profileEmail) profileEmail.textContent = '–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç';
                if (menuUserName) menuUserName.textContent = '–ì–æ—Å—Ç—å';
                if (menuUserEmail) menuUserEmail.textContent = '';
                
                if (loginMenuBtn) loginMenuBtn.style.display = 'block';
                if (logoutMenuBtn) logoutMenuBtn.style.display = 'none';
                if (adminAccessBtn) adminAccessBtn.style.display = 'none';
                if (performerAccessBtn) performerAccessBtn.style.display = 'none';
                if (performerPanelLink) performerPanelLink.style.display = 'none';
                if (bottomNav) bottomNav.style.display = 'none';
                if (floatingBtn) floatingBtn.style.display = 'none';
                
                const statTasks = document.getElementById('statTasks');
                const statRating = document.getElementById('statRating');
                const statBalance = document.getElementById('statBalance');
                
                if (statTasks) statTasks.textContent = '0';
                if (statRating) statRating.textContent = '0';
                if (statBalance) statBalance.textContent = '0‚ÇΩ';
            }
        }
        
        function updateProfileStats() {
            if (!app.currentUser) return;
            
            const statTasks = document.getElementById('statTasks');
            const statRating = document.getElementById('statRating');
            const statBalance = document.getElementById('statBalance');
            
            if (statTasks) statTasks.textContent = app.currentUser.tasks_used || '0';
            if (statRating) statRating.textContent = app.currentUser.rating || '0';
            if (statBalance) statBalance.textContent = (app.currentUser.balance || '0') + '‚ÇΩ';
        }
        
        function updateProfileSubscriptionCard() {
            if (!app.currentUser) return;
            
            const card = document.getElementById('profileSubscriptionCard');
            if (!card) return;
            
            if (app.currentUser.subscription_status === 'active' && app.currentUser.initial_fee_paid) {
                const planName = app.subscriptions.find(sub => sub.name === app.currentUser.subscription_plan)?.display_name || app.currentUser.subscription_plan;
                const expiresDate = app.currentUser.subscription_expires ? new Date(app.currentUser.subscription_expires) : null;
                
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                        <div>
                            <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 5px;">${planName}</h3>
                            <p style="color: var(--graphite-medium); font-size: 0.9rem;">
                                ${expiresDate ? `–ê–∫—Ç–∏–≤–Ω–∞ –¥–æ ${expiresDate.toLocaleDateString('ru-RU')}` : '–ê–∫—Ç–∏–≤–Ω–∞'}
                            </p>
                        </div>
                        <span style="background: rgba(56, 178, 172, 0.1); color: var(--success); padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">–ê–∫—Ç–∏–≤–Ω–∞</span>
                    </div>
                    ${expiresDate ? `
                    <div style="background: rgba(56, 178, 172, 0.05); padding: 12px; border-radius: var(--radius-sm); margin-bottom: 15px; border: 1px solid rgba(56, 178, 172, 0.1);">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <i class="fas fa-calendar-alt" style="color: var(--success);"></i>
                            <span style="font-size: 0.9rem; color: var(--graphite-dark); font-weight: 500;">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:</span>
                        </div>
                        <div style="font-size: 0.95rem; color: var(--graphite-dark); margin-left: 24px;">
                            ${expiresDate.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' })}
                        </div>
                    </div>
                    ` : ''}
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-secondary" style="flex: 1;" onclick="navigateToPage('subscription')">
                            <i class="fas fa-exchange-alt"></i>
                            –°–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ
                        </button>
                        <button class="btn btn-secondary" style="flex: 1;" onclick="showHelp()">
                            <i class="fas fa-question-circle"></i>
                            –ü–æ–¥–¥–µ—Ä–∂–∫–∞
                        </button>
                    </div>
                `;
            } else {
                card.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-crown empty-state-icon"></i>
                        <h3 class="empty-state-title">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞</h3>
                        <p class="empty-state-description">–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º</p>
                        <button class="btn btn-primary" onclick="navigateToPage('subscription')">
                            <i class="fas fa-crown"></i>
                            –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
                        </button>
                    </div>
                `;
            }
        }
        
        function updateProfileSettings() {
            if (!app.currentUser) return;
            
            const settingsContainer = document.getElementById('profileSettingsList');
            if (!settingsContainer) return;
            
            let settingsHTML = `
                <a href="#" class="nav-menu-item" onclick="navigateToPage('subscription')" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                    <i class="fas fa-crown" style="margin-right: 12px; color: var(--pastel-pink);"></i>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
                </a>
            `;
            
            if (!app.currentUser.phone_verified) {
                settingsHTML += `
                    <a href="#" class="nav-menu-item" onclick="openSendCodeModal()" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                        <i class="fas fa-mobile-alt" style="margin-right: 12px; color: var(--pastel-pink);"></i>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω
                    </a>
                `;
            }
            
            settingsHTML += `
                <a href="#" class="nav-menu-item" onclick="navigateToPage('guides')" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                    <i class="fas fa-book" style="margin-right: 12px; color: var(--pastel-pink);"></i>–ì–∞–π–¥—ã
                </a>
                <a href="#" class="nav-menu-item" onclick="navigateToPage('all-services')" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                    <i class="fas fa-list" style="margin-right: 12px; color: var(--pastel-pink);"></i>–í—Å–µ —É—Å–ª—É–≥–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="showHelp()" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                    <i class="fas fa-question-circle" style="margin-right: 12px; color: var(--pastel-pink);"></i>–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
                </a>
                <a href="#" class="nav-menu-item" onclick="logout()" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast);">
                    <i class="fas fa-sign-out-alt" style="margin-right: 12px; color: var(--error);"></i>–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
                </a>
            `;
            
            settingsContainer.innerHTML = settingsHTML;
        }
        
        async function loadUserProfile() {
            if (!app.currentUser) {
                const container = document.getElementById('profileTasksList');
                if (container) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-user empty-state-icon"></i>
                            <h3 class="empty-state-title">–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</h3>
                            <p class="empty-state-description">–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏</p>
                            <button class="btn btn-primary" onclick="showLoginModal()">
                                <i class="fas fa-sign-in-alt"></i>
                                –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
                            </button>
                        </div>
                    `;
                }
                return;
            }
            
            try {
                updateUserInterface();
                await loadRecentTasks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
            }
        }
        
        async function loadRecentTasks() {
            try {
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/tasks/recent`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.userTasks = result.data.tasks;
                        renderRecentTasks();
                        return;
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á:', error);
            }
            
            // Fallback
            app.userTasks = app.currentUser.tasks_used > 0 ? [
                {
                    id: 1,
                    title: "–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã",
                    status: "completed",
                    category_name: "–î–æ–º –∏ –±—ã—Ç",
                    created_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
                }
            ] : [];
            
            renderRecentTasks();
        }
        
        function renderRecentTasks() {
            const container = document.getElementById('profileTasksList');
            if (!container) return;
            
            if (!app.userTasks || app.userTasks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-tasks empty-state-icon"></i>
                        <h3 class="empty-state-title">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                        <p class="empty-state-description">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            app.userTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'card task-item';
                taskElement.onclick = () => showTaskDetailsCompact(task.id);
                
                taskElement.innerHTML = `
                    <div class="task-header">
                        <div class="task-title">${task.title}</div>
                        <span class="task-status ${task.status}">${getStatusText(task.status)}</span>
                    </div>
                    <div style="color: var(--graphite-medium); font-size: 0.9rem; margin-bottom: 8px;">
                        ${task.category_name || ''}
                    </div>
                    <div style="color: var(--graphite-light); font-size: 0.8rem;">
                        <i class="far fa-calendar" style="margin-right: 8px;"></i>
                        ${new Date(task.created_at).toLocaleDateString('ru-RU')}
                    </div>
                `;
                container.appendChild(taskElement);
            });
        }
        
        // ==================== –ó–ê–î–ê–ß–ò ====================
        
        async function loadUserTasks(filter = 'all') {
            try {
                app.currentTaskFilter = filter;
                
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                const activeTab = document.querySelector(`.tab[onclick*="${filter}"]`);
                if (activeTab) activeTab.classList.add('active');
                
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/tasks?status=${filter}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.userTasks = result.data.tasks;
                        renderUserTasks();
                        return;
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á:', error);
            }
            
            // Fallback
            app.userTasks = [
                {
                    id: 1,
                    task_number: "TASK-001",
                    title: "–£–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã",
                    category_name: "–î–æ–º –∏ –±—ã—Ç",
                    status: "completed",
                    created_at: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                    price: null
                },
                {
                    id: 2,
                    task_number: "TASK-002",
                    title: "–ù—è–Ω—è –¥–ª—è —Ä–µ–±–µ–Ω–∫–∞ 5 –ª–µ—Ç",
                    category_name: "–°–µ–º—å—è –∏ –¥–µ—Ç–∏",
                    status: "in_progress",
                    created_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                    price: null
                }
            ].filter(task => filter === 'all' || task.status === filter);
            
            renderUserTasks();
        }
        
        function renderUserTasks() {
            renderUserTasksCards();
            renderUserTasksTable();
        }

// –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –§–£–ù–ö–¶–ò–Æ:
function filterTasks(filterType) {
    loadUserTasks(filterType);
}
        
        function renderUserTasksCards() {
            const container = document.getElementById('userTasksCards');
            if (!container) return;
            
            if (!app.userTasks || app.userTasks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-tasks empty-state-icon"></i>
                        <h3 class="empty-state-title">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                        <p class="empty-state-description">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–º–æ—â–Ω–∏—Ü</p>
                        <button class="btn btn-primary" onclick="checkSubscription()">
                            <i class="fas fa-plus"></i>
                            –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            app.userTasks.forEach(task => {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';
                taskCard.onclick = () => showTaskDetailsCompact(task.id);
                
                taskCard.innerHTML = `
                    <div class="task-card-row">
                        <div class="task-card-label">–ù–æ–º–µ—Ä:</div>
                        <div class="task-card-value">${task.task_number}</div>
                    </div>
                    <div class="task-card-row">
                        <div class="task-card-label">–ó–∞–¥–∞—á–∞:</div>
                        <div class="task-card-value">${task.title}</div>
                    </div>
                    <div class="task-card-row">
                        <div class="task-card-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</div>
                        <div class="task-card-value">${task.category_name || ''}</div>
                    </div>
                    <div class="task-card-row">
                        <div class="task-card-label">–°—Ç–∞—Ç—É—Å:</div>
                        <div class="task-card-value">
                            <span class="status-badge status-${task.status}">${getStatusText(task.status)}</span>
                        </div>
                    </div>
                    <div class="task-card-row">
                        <div class="task-card-label">–°–æ–∑–¥–∞–Ω–∞:</div>
                        <div class="task-card-value">${new Date(task.created_at).toLocaleDateString('ru-RU')}</div>
                    </div>
                    <div class="task-card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); showTaskDetailsCompact(${task.id})">
                            <i class="fas fa-eye"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                `;
                container.appendChild(taskCard);
            });
        }
        
        function renderUserTasksTable() {
            const container = document.getElementById('userTasksTable');
            if (!container) return;
            
            if (!app.userTasks || app.userTasks.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            const table = document.createElement('table');
            table.className = 'task-history-table';
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>–ù–æ–º–µ—Ä –∑–∞–¥–∞—á–∏</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    ${app.userTasks.map(task => `
                        <tr>
                            <td>${task.task_number}</td>
                            <td>${task.title}</td>
                            <td>${task.category_name || ''}</td>
                            <td><span class="task-status ${task.status}">${getStatusText(task.status)}</span></td>
                            <td>${new Date(task.created_at).toLocaleDateString('ru-RU')}</td>
                            <td>
                                <button class="btn btn-secondary btn-sm" onclick="showTaskDetailsCompact(${task.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
            
            container.innerHTML = '';
            container.appendChild(table);
        }
        
        async function showTaskDetailsCompact(taskId) {
            try {
                showLoading('–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á–∏...');
                
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/tasks/${taskId}`);
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        const task = result.data.task;
                        renderTaskDetailsCompact(task, []);
                        navigateToPage('task-details');
                        return;
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á–∏:', error);
            } finally {
                hideLoading();
            }
            
            // Fallback
            const mockTask = {
                id: taskId,
                task_number: `TASK-00${taskId}`,
                title: "–£–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã",
                description: "–ü–æ–ª–Ω–∞—è —É–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø–ª–æ—â–∞–¥—å—é 60 –∫–≤.–º.",
                status: "in_progress",
                category_name: "–î–æ–º –∏ –±—ã—Ç",
                address: "—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 10, –∫–≤. 25",
                deadline: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),
                created_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                priority: "medium",
                price: null,
                additional_requirements: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è —É–±–æ—Ä–∫–∏."
            };
            
            renderTaskDetailsCompact(mockTask, []);
            navigateToPage('task-details');
        }
        
        function renderTaskDetailsCompact(task, messages) {
            const container = document.getElementById('taskCompactDetails');
            const statusInfo = getStatusInfo(task.status);
            
            container.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                    <div>
                        <h3 style="color: var(--graphite-dark); margin-bottom: 8px; font-size: 1.2rem;">${task.title}</h3>
                        <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
                            <span class="status-badge status-${task.status}" style="display: inline-flex; align-items: center; gap: 4px; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; background: ${statusInfo.color ? statusInfo.color + '15' : 'rgba(61,61,61,0.1)'}; color: ${statusInfo.color || 'var(--graphite-dark)'}">
                                <i class="${statusInfo.icon || 'fas fa-circle'}"></i>
                                ${statusInfo.name}
                            </span>
                            <span style="font-size: 0.9rem; color: var(--graphite-medium);">
                                <i class="far fa-calendar"></i> ${new Date(task.created_at).toLocaleDateString('ru-RU')}
                            </span>
                            <span style="font-size: 0.9rem; color: var(--graphite-medium);">
                                <i class="fas fa-hashtag"></i> ${task.task_number}
                            </span>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--pastel-pink);">
                            ${task.price ? formatNumber(task.price) + ' ‚ÇΩ' : '<i class="fas fa-crown"></i> –í–∫–ª—é—á–µ–Ω–æ –≤ –ø–æ–¥–ø–∏—Å–∫—É'}
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--graphite-medium); margin-bottom: 4px;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
                        <div style="font-weight: 500;">${task.category_name || '-'}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--graphite-medium); margin-bottom: 4px;">–ê–¥—Ä–µ—Å</div>
                        <div style="font-weight: 500;">${task.address || '-'}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--graphite-medium); margin-bottom: 4px;">–î–µ–¥–ª–∞–π–Ω</div>
                        <div style="font-weight: 500;">${new Date(task.deadline).toLocaleDateString('ru-RU')}</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 0.8rem; color: var(--graphite-medium); margin-bottom: 8px;">–û–ø–∏—Å–∞–Ω–∏–µ</div>
                    <div style="background: rgba(61,61,61,0.02); padding: 12px; border-radius: 8px; border: 1px solid rgba(61,61,61,0.05);">
                        ${task.description}
                    </div>
                </div>
                
                ${task.additional_requirements ? `
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 0.8rem; color: var(--graphite-medium); margin-bottom: 8px;">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</div>
                    <div style="background: rgba(61,61,61,0.02); padding: 12px; border-radius: 8px; border: 1px solid rgba(61,61,61,0.05); font-size: 0.9rem;">
                        ${task.additional_requirements}
                    </div>
                </div>
                ` : ''}
                
                <div style="display: flex; gap: 10px; margin-top: 24px; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="toggleTaskChat(${task.id})" id="toggleChatBtn" style="flex: 1;">
                        <i class="fas fa-comments"></i>
                        ${messages.length > 0 ? `–ß–∞—Ç (${messages.length})` : '–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç'}
                    </button>
                </div>
            `;
            
            app.currentChatTaskId = task.id;
            app.chatMessages = messages;
        }
        
        function toggleTaskChat(taskId) {
            const chatSection = document.getElementById('taskChatSection');
            const toggleBtn = document.getElementById('toggleChatBtn');
            
            if (chatSection.style.display === 'none' || chatSection.style.display === '') {
                chatSection.style.display = 'block';
                if (toggleBtn) {
                    toggleBtn.innerHTML = '<i class="fas fa-times"></i> –°–∫—Ä—ã—Ç—å —á–∞—Ç';
                }
            } else {
                chatSection.style.display = 'none';
                if (toggleBtn) {
                    toggleBtn.innerHTML = '<i class="fas fa-comments"></i> –ü–æ–∫–∞–∑–∞—Ç—å —á–∞—Ç';
                }
            }
        }
        
        async function sendInlineChatMessage() {
            if (!app.currentChatTaskId) return;
            
            const input = document.getElementById('inlineChatMessage');
            const message = input.value.trim();
            if (!message) return;
            
            try {
                const response = await fetchWithAuth(`${app.API_BASE_URL}/api/tasks/${app.currentChatTaskId}/messages`, {
                    method: 'POST',
                    body: JSON.stringify({ message })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        app.chatMessages.push(result.data.message);
                        input.value = '';
                        renderInlineChatMessages();
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è', 'error');
            }
        }
        
        function renderInlineChatMessages() {
            const container = document.getElementById('inlineChatMessages');
            if (!container) return;
            
            if (app.chatMessages.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--graphite-medium);">
                        <i class="fas fa-comments" style="font-size: 2rem; opacity: 0.3; margin-bottom: 16px;"></i>
                        <p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = app.chatMessages.map(msg => {
                const isCurrentUser = msg.user_id === app.currentUser?.id;
                return `
                    <div style="display: flex; ${isCurrentUser ? 'justify-content: flex-end;' : ''} margin-bottom: 12px;">
                        <div style="max-width: 70%; ${isCurrentUser ? 'background: linear-gradient(135deg, var(--pastel-pink), var(--pink-medium));' : 'background: white; border: 1px solid rgba(61,61,61,0.1)'}; 
                             padding: 10px 14px; border-radius: 18px; ${isCurrentUser ? 'border-bottom-right-radius: 4px;' : 'border-bottom-left-radius: 4px;'} box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <div style="margin-bottom: 4px; font-size: 0.9rem; line-height: 1.4;">${msg.message}</div>
                            <div style="font-size: 0.7rem; color: var(--graphite-light); text-align: ${isCurrentUser ? 'right' : 'left'}">
                                ${new Date(msg.created_at).toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'})}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function getStatusText(status) {
            const statusMap = {
                'new': '–ù–æ–≤–∞—è',
                'searching': '–ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è',
                'assigned': '–ù–∞–∑–Ω–∞—á–µ–Ω–∞',
                'in_progress': '–í —Ä–∞–±–æ—Ç–µ',
                'completed': '–í—ã–ø–æ–ª–Ω–µ–Ω–∞',
                'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–∞'
            };
            return statusMap[status] || status;
        }
        
        function getStatusInfo(status) {
            const statuses = {
                'new': { name: '–ù–æ–≤–∞—è', icon: 'fas fa-star', color: '#1976D2' },
                'searching': { name: '–ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è', icon: 'fas fa-search', color: '#FF9800' },
                'assigned': { name: '–ù–∞–∑–Ω–∞—á–µ–Ω–∞', icon: 'fas fa-user-check', color: '#2196F3' },
                'in_progress': { name: '–í —Ä–∞–±–æ—Ç–µ', icon: 'fas fa-cogs', color: '#673AB7' },
                'completed': { name: '–í—ã–ø–æ–ª–Ω–µ–Ω–∞', icon: 'fas fa-check-circle', color: '#4CAF50' },
                'cancelled': { name: '–û—Ç–º–µ–Ω–µ–Ω–∞', icon: 'fas fa-times-circle', color: '#F44336' }
            };
            return statuses[status] || { name: status, icon: 'fas fa-question-circle', color: '#9E9E9E' };
        }
        
        // ==================== –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ====================
        
        async function login() {
            try {
                const phoneEmail = document.getElementById('loginPhoneInput').value;
                const password = document.getElementById('loginPasswordInput').value;
                
                if (!phoneEmail || !password) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                const isPhone = /^[\+]?[0-9\s\-\(\)]+$/.test(phoneEmail.replace(/\s/g, ''));
                let loginData;
                
                if (isPhone) {
                    loginData = { phone: normalizePhone(phoneEmail), password };
                } else {
                    loginData = { email: phoneEmail, password };
                }
                
                showLoading('–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É...');
                
                const response = await fetch(`${app.API_BASE_URL}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(loginData)
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error);
                
                app.currentUser = result.data.user;
                app.currentToken = result.data.token;
                
                localStorage.setItem('token', app.currentToken);
                localStorage.setItem('currentUser', JSON.stringify(app.currentUser));
                
                showNotification('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!', 'success');
                closeModal('loginModal');
                updateUserInterface();
                determineInitialScreen();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        async function register() {
            try {
                const firstName = document.getElementById('registerFirstName').value;
                const lastName = document.getElementById('registerLastName').value;
                const email = document.getElementById('registerEmail').value;
                const phone = document.getElementById('registerPhone').value;
                const password = document.getElementById('registerPassword').value;
                
                if (!firstName || !phone || !password) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –ø–∞—Ä–æ–ª—å', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showNotification('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                    return;
                }
                
                showLoading('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...');
                
                const response = await fetch(`${app.API_BASE_URL}/api/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        phone: normalizePhone(phone),
                        password: password,
                        first_name: firstName,
                        last_name: lastName,
                        email: email || null,
                        subscription_plan: 'essential'
                    })
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error);
                
                app.currentUser = result.data.user;
                localStorage.setItem('currentUser', JSON.stringify(app.currentUser));
                
                showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ—á—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω.', 'info');
                closeModal('registerModal');
                
                if (result.data.requires_phone_verification) {
                    setTimeout(() => {
                        openVerifyPhoneModal(result.data.phone || normalizePhone(phone));
                        navigateToPage('auth');
                    }, 500);
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        // ==================== –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ü–ê–†–û–õ–Ø ====================
        
        async function sendPasswordResetCode() {
            const input = document.getElementById('forgotPasswordInput').value;
            
            if (!input) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω', 'error');
                return;
            }
            
            try {
                showLoading('–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è...');
                
                const response = await fetch(`${app.API_BASE_URL}/api/auth/forgot-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email_or_phone: input })
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error);
                
                showNotification('–ö–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!', 'success');
                closeModal('forgotPasswordModal');
                
                setTimeout(() => showResetPasswordModal(), 500);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        async function resetPassword() {
            const code = document.getElementById('resetCodeInput').value;
            const newPassword = document.getElementById('newPasswordInput').value;
            const confirmPassword = document.getElementById('confirmPasswordInput').value;
            
            if (!code || !newPassword || !confirmPassword) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showNotification('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
                return;
            }
            
            try {
                showLoading('–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è...');
                
                const response = await fetch(`${app.API_BASE_URL}/api/auth/reset-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code, new_password: newPassword })
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error);
                
                showNotification('–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!', 'success');
                closeModal('resetPasswordModal');
                
                setTimeout(() => showLoginModal(), 1000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        // ==================== –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –¢–ï–õ–ï–§–û–ù–ê ====================
        
        function openVerifyPhoneModal(phoneNumber) {
            closeAllModals();
            const modal = document.getElementById('verifyPhoneModal');
            if (modal) {
                const phoneInput = document.getElementById('verifyPhoneNumber');
                if (phoneInput && phoneNumber) phoneInput.value = phoneNumber;
                modal.classList.add('active');
            }
        }
        
        function openSendCodeModal() {
            closeAllModals();
            const modal = document.getElementById('sendCodeModal');
            if (modal) modal.classList.add('active');
        }
        
        function closeVerifyPhoneModal() {
            closeModal('verifyPhoneModal');
        }
        
        async function sendVerificationCode(fromSendModal = false) {
            let phoneNumber;
            
            if (fromSendModal) {
                phoneNumber = document.getElementById('sendCodePhone').value;
                if (!phoneNumber) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞', 'error');
                    return;
                }
            } else {
                phoneNumber = document.getElementById('verifyPhoneNumber').value;
            }
            
            if (!phoneNumber) {
                showNotification('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                return;
            }
            
            try {
                showLoading('–û—Ç–ø—Ä–∞–≤–∫–∞ SMS –∫–æ–¥–∞...');
                
                const response = await fetch(`${app.API_BASE_URL}/api/auth/send-verification-code`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone: normalizePhone(phoneNumber) })
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞');
                
                showNotification('–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!', 'success');
                
                if (fromSendModal) {
                    closeModal('sendCodeModal');
                    openVerifyPhoneModal(phoneNumber);
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        async function verifyPhoneCode() {
            const phoneNumber = document.getElementById('verifyPhoneNumber').value;
            const code = document.getElementById('verifyPhoneCode').value;
            
            if (!phoneNumber || !code) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è', 'error');
                return;
            }
            
            if (code.length !== 6) {
                showNotification('–ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 6 —Ü–∏—Ñ—Ä', 'error');
                return;
            }
            
            try {
                showLoading('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞...');
                
                const response = await fetch(`${app.API_BASE_URL}/api/auth/verify-phone`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': app.currentToken ? `Bearer ${app.currentToken}` : ''
                    },
                    body: JSON.stringify({
                        phone: normalizePhone(phoneNumber),
                        code: code
                    })
                });
                
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const result = await response.json();
                if (!result.success) throw new Error(result.error || '–û—à–∏–±–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                
                app.currentToken = result.data.token;
                app.currentUser = result.data.user;
                
                localStorage.setItem('token', app.currentToken);
                localStorage.setItem('currentUser', JSON.stringify(app.currentUser));
                
                showNotification('–¢–µ–ª–µ—Ñ–æ–Ω —É—Å–ø–µ—à–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!', 'success');
                closeVerifyPhoneModal();
                
                if (app.currentUser) {
                    app.currentUser.phone_verified = true;
                    localStorage.setItem('currentUser', JSON.stringify(app.currentUser));
                    updateUserInterface();
                }
                
                if (app.currentUser && !app.currentUser.subscription_plan) {
                    showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!', 'success');
                    setTimeout(() => navigateToPage('subscription'), 1000);
                } else if (app.currentUser && app.currentUser.subscription_status === 'active') {
                    showNotification('–ê–∫–∫–∞—É–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!', 'success');
                    setTimeout(() => navigateToPage('home'), 1000);
                } else {
                    showNotification('–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É', 'success');
                    setTimeout(() => navigateToPage('subscription'), 1000);
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞:', error);
                showNotification(error.message, 'error');
            } finally {
                hideLoading();
            }
        }
        
        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('currentUser');
            app.currentToken = null;
            app.currentUser = null;
            updateUserInterface();
            showNotification('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
            navigateToPage('auth');
            closeUserMenu();
        }
        
        function formatNumber(num) {
            if (!num && num !== 0) return '0';
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
        }
        
        function showNotification(message, type = 'success') {
            const oldNotifications = document.querySelectorAll('.notification');
            oldNotifications.forEach(notif => notif.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'fas fa-check-circle';
            if (type === 'error') icon = 'fas fa-exclamation-circle';
            if (type === 'warning') icon = 'fas fa-exclamation-triangle';
            if (type === 'info') icon = 'fas fa-info-circle';
            
            notification.innerHTML = `<i class="${icon}"></i><span>${message}</span>`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) notification.remove();
                    }, 300);
                }
            }, 5000);
        }
        
        function showLoading(message = '–ó–∞–≥—Ä—É–∑–∫–∞...') {
            const loadingEl = document.createElement('div');
            loadingEl.id = 'globalLoading';
            loadingEl.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.9);
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 9999;
            `;
            loadingEl.innerHTML = `<div class="spinner"></div><p style="margin-top: 20px; color: var(--graphite-dark);">${message}</p>`;
            document.body.appendChild(loadingEl);
        }
        
        function hideLoading() {
            const loadingEl = document.getElementById('globalLoading');
            if (loadingEl) loadingEl.remove();
        }
        
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            if (menu) {
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            }
        }
        
        function closeUserMenu() {
            const menu = document.getElementById('userMenu');
            if (menu) menu.style.display = 'none';
        }
        
        function showHelp() {
            showNotification('–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ email: support@womanhelp.ru', 'info');
            closeUserMenu();
        }
        
        // ==================== –ü–û–ü-–ê–ü –û–ö–ù–û –ó–ê–î–ê–ß ====================
        
        function showTasksPopup() {
            closeUserMenu();
            const modal = document.getElementById('tasksPopupModal');
            if (modal) {
                modal.style.display = 'flex';
                loadPopupTasks();
            }
        }
        
        function closeTasksPopup() {
            const modal = document.getElementById('tasksPopupModal');
            if (modal) modal.style.display = 'none';
        }
        
        async function loadPopupTasks() {
            try {
                const container = document.getElementById('popupTasksList');
                if (!container) return;
                
                container.innerHTML = '<div style="text-align: center; padding: 20px;"><div class="spinner"></div><p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p></div>';
                await loadUserTasks(app.currentTaskFilter);
                renderPopupTasks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á –¥–ª—è –ø–æ–ø-–∞–ø:', error);
                const container = document.getElementById('popupTasksList');
                if (container) {
                    container.innerHTML = `<div style="text-align: center; padding: 40px;">
                        <i class="fas fa-exclamation-circle" style="font-size: 2rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                        <p style="color: var(--graphite-medium);">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á</p>
                    </div>`;
                }
            }
        }
        
        function renderPopupTasks() {
            const container = document.getElementById('popupTasksList');
            if (!container || !app.userTasks) return;
            
            if (app.userTasks.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <i class="fas fa-tasks" style="font-size: 2rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                        <p style="color: var(--graphite-medium); margin-bottom: 20px;">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç</p>
                        <button class="btn btn-primary" onclick="closeTasksPopup(); checkSubscription();">
                            <i class="fas fa-plus"></i>
                            –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            app.userTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task-quick-item';
                taskElement.onclick = () => {
                    closeTasksPopup();
                    showTaskDetailsCompact(task.id);
                };
                
                taskElement.innerHTML = `
                    <div class="task-quick-header">
                        <div class="task-quick-title">${task.title}</div>
                        <span class="status-badge status-${task.status}">${getStatusText(task.status)}</span>
                    </div>
                    <div class="task-quick-info">
                        <i class="fas fa-tag"></i> ${task.category_name || ''}
                    </div>
                    <div class="task-quick-date">
                        <i class="far fa-calendar"></i> ${new Date(task.created_at).toLocaleDateString('ru-RU')}
                    </div>
                `;
                container.appendChild(taskElement);
            });
        }
        
       // ==================== –ì–ê–ô–î–´ ====================

function showGuide(guideId) {
    const guides = {
        'getting-started': {
            title: '–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã',
            content: `
                <h3>–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É:</h3>
                <ol>
                    <li>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</li>
                    <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–æ–¥–ø–∏—Å–∫—É</li>
                    <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–£—Å–ª—É–≥–∏" –∏–ª–∏ "–í—Å–µ —É—Å–ª—É–≥–∏"</li>
                    <li>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —É—Å–ª—É–≥—É</li>
                    <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É"</li>
                </ol>
                
                <div class="mt-20">
                    <button class="btn btn-primary" onclick="navigateToPage('all-services')">
                        <i class="fas fa-play-circle"></i>
                        –ù–∞—á–∞—Ç—å —Å–µ–π—á–∞—Å
                    </button>
                </div>
            `
        },
        'tips': {
            title: '–°–æ–≤–µ—Ç—ã –ø–æ –∑–∞–¥–∞—á–∞–º',
            content: `
                <h3>–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á—É:</h3>
                <ul>
                    <li><strong>–ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã:</strong> –ß–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–π–º–µ—Ç –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è</li>
                    <li><strong>–£–∫–∞–∑—ã–≤–∞–π—Ç–µ –∞–¥—Ä–µ—Å —Ç–æ—á–Ω–æ:</strong> –í–∫–ª—é—á–∞—è –ø–æ–¥—ä–µ–∑–¥, —ç—Ç–∞–∂, –∫–æ–¥ –¥–æ–º–æ—Ñ–æ–Ω–∞</li>
                    <li><strong>–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ—á–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</li>
                </ul>
            `
        },
        'safety': {
            title: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
            content: `
                <h3>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</h3>
                <ul>
                    <li><strong>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥:</strong> –í—ã–±–∏—Ä–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏ –æ—Ç–∑—ã–≤–∞–º–∏</li>
                    <li><strong>–ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –¥–µ–Ω—å–≥–∏ –∑–∞—Ä–∞–Ω–µ–µ:</strong> –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É</li>
                    <li><strong>–•—Ä–∞–Ω–∏—Ç–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏:</strong> –£–±–µ—Ä–∏—Ç–µ —Ü–µ–Ω–Ω—ã–µ –≤–µ—â–∏ –ø–µ—Ä–µ–¥ –≤–∏–∑–∏—Ç–æ–º –ø–æ–º–æ—â–Ω–∏—Ü—ã</li>
                </ul>
            `
        }
    };

    if (guides[guideId]) {
        const guide = guides[guideId];
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.id = 'guideModal';
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 class="modal-title">${guide.title}</h3>
                    <button class="close-popup-btn" onclick="closeGuideModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div style="margin-bottom: 20px;">${guide.content}</div>
                <button class="btn btn-primary" onclick="closeGuideModal()" style="width: 100%;">
                    <i class="fas fa-check"></i>
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
        `;
        document.body.appendChild(modal);
        modal.style.display = 'flex';
    }
}

function closeGuideModal() {
    const modal = document.getElementById('guideModal');
    if (modal) modal.remove();
}

// ==================== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ====================

function showLoginModal() {
    closeAllModals();
    const modal = document.getElementById('loginModal');
    if (modal) modal.classList.add('active');
    closeUserMenu();
}

function showRegisterModal() {
    closeAllModals();
    const modal = document.getElementById('registerModal');
    if (modal) modal.classList.add('active');
}

function showForgotPasswordModal() {
    closeAllModals();
    const modal = document.getElementById('forgotPasswordModal');
    if (modal) modal.classList.add('active');
}

function showResetPasswordModal() {
    closeAllModals();
    const modal = document.getElementById('resetPasswordModal');
    if (modal) modal.classList.add('active');
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) modal.classList.remove('active');
}

function closeAllModals() {
    document.querySelectorAll('.modal').forEach(modal => {
        modal.classList.remove('active');
    });
}

// ==================== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====================

function navigateToPage(pageId) {
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    
    const targetPage = document.getElementById(pageId + '-page');
    if (targetPage) {
        targetPage.classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('data-page') === pageId) {
                item.classList.add('active');
            }
        });
        
        switch(pageId) {
            case 'home': loadHomePage(); break;
            case 'all-services': loadAllServicesPage(); break;
            case 'profile': loadUserProfile(); break;
            case 'tasks': loadUserTasks('all'); break;
            case 'subscription': loadSubscriptionPage(); break;
        }
        
        const userMenu = document.getElementById('userMenu');
        if (userMenu && userMenu.style.display === 'block') {
            userMenu.style.display = 'none';
        }
    }
}

function navigateToPerformerPanel() {
    window.location.href = '/performer.html';
}

// ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================

window.addEventListener('DOMContentLoaded', async () => {
    console.log('üåê WOMAN HELP v2.0 - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...');
    
    animateCounters();
    await loadLogo();
    await loadCategories();
    await loadAllServices();
    await loadSubscriptions();
    await loadDefaultImages(); // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
    
    setupEventListeners();
    determineInitialScreen();
    updateUserInterface();
    
    const deadlineInput = document.getElementById('taskDeadline');
    if (deadlineInput) {
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        deadlineInput.min = new Date().toISOString().split('T')[0];
        deadlineInput.value = tomorrow.toISOString().split('T')[0];
    }
    
    console.log('‚úÖ WOMAN HELP –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
});
        
// ==================== –î–ï–§–û–õ–¢–ù–´–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø ====================

async function loadDefaultImages() {
    setupDefaultImages();
}

// ==================== –≠–ö–°–ü–û–†–¢ –§–£–ù–ö–¶–ò–ô ====================

window.app = app;
window.navigateToPage = navigateToPage;
window.showLoginModal = showLoginModal;
window.showRegisterModal = showRegisterModal;
window.showForgotPasswordModal = showForgotPasswordModal;
window.sendPasswordResetCode = sendPasswordResetCode;
window.resetPassword = resetPassword;
window.showTasksPopup = showTasksPopup;
window.checkSubscription = checkSubscription;
window.showTaskDetailsCompact = showTaskDetailsCompact;
window.openSendCodeModal = openSendCodeModal;
window.sendVerificationCode = sendVerificationCode;
window.verifyPhoneCode = verifyPhoneCode;
window.selectSubscription = selectSubscription;
window.showGuide = showGuide;
window.closeGuideModal = closeGuideModal;
window.filterServices = filterServices;
window.selectCategory = selectCategory;
window.selectCategoryForServices = selectCategoryForServices;
window.selectService = selectService;
window.cancelTask = cancelTask;
window.showHelp = showHelp;
window.navigateToPerformerPanel = navigateToPerformerPanel;
window.logout = logout;
window.openVerifyPhoneModal = openVerifyPhoneModal;
window.filterTasks = filterTasks;
window.toggleTaskChat = toggleTaskChat;
window.sendInlineChatMessage = sendInlineChatMessage;
window.closeTasksPopup = closeTasksPopup;
window.closeVerifyPhoneModal = closeVerifyPhoneModal;
window.closeModal = closeModal;
window.closeAllModals = closeAllModals;
window.toggleUserMenu = toggleUserMenu;
window.closeUserMenu = closeUserMenu;
window.clearSearch = clearSearch;
window.loadAllServicesPage = loadAllServicesPage;
window.login = login;
window.register = register;
window.createTask = createTask;
window.showNotification = showNotification;
window.showLoading = showLoading;
window.hideLoading = hideLoading;
window.loadDefaultImages = loadDefaultImages;
    </script>
</body>
</html>
