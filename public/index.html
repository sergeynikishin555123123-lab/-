<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>üéÄ –ñ–µ–Ω—Å–∫–∏–π –ö–æ–Ω—Å—å–µ—Ä–∂ | –ü—Ä–µ–º–∏—É–º —Å–µ—Ä–≤–∏—Å –¥–ª—è –∂–µ–Ω—â–∏–Ω</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */
        :root {
            --ivory-bg: #F9F7F3;
            --graphite-dark: #3D3D3D;
            --graphite-medium: #5A5A5A;
            --graphite-light: #8A8A8A;
            --pastel-pink: #F2DDE6;
            --pink-light: #FAEFF5;
            --gold-metallic: #C5A880;
            --gold-dark: #A78B65;
            --lavender: #B9AFFF;
            --lavender-light: #E0DDFF;
            --aquamarine: #7FE0D1;
            --aqua-dark: #5AC8B7;
            --white: #FFFFFF;
            --success: #38B2AC;
            --warning: #ED8936;
            --error: #FC8181;
            --info: #4299E1;
            
            --shadow-sm: 0 2px 8px rgba(61, 61, 61, 0.05);
            --shadow: 0 4px 16px rgba(61, 61, 61, 0.08);
            --shadow-lg: 0 8px 32px rgba(61, 61, 61, 0.12);
            --shadow-xl: 0 20px 40px rgba(61, 61, 61, 0.15);
            
            --radius-sm: 8px;
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-full: 9999px;
            
            --transition-fast: 0.15s ease;
            --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.4s ease;
            
            --nav-height: 70px;
            --bottom-nav-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--ivory-bg);
            color: var(--graphite-dark);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            padding-top: var(--nav-height);
            padding-bottom: var(--bottom-nav-height);
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 16px;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å–≤–µ—Ä—Ö—É */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--nav-height);
            background: var(--white);
            border-bottom: 1px solid rgba(61, 61, 61, 0.08);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--graphite-dark);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            color: var(--gold-metallic);
            font-size: 1.8rem;
        }
        
        .user-avatar {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--lavender-light), var(--pastel-pink));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--graphite-dark);
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            cursor: pointer;
        }
        
        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--bottom-nav-height);
            background: var(--white);
            border-top: 1px solid rgba(61, 61, 61, 0.08);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.98);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--graphite-medium);
            padding: 8px 12px;
            border-radius: var(--radius);
            transition: var(--transition-fast);
            min-width: 70px;
        }
        
        .nav-item.active {
            color: var(--gold-metallic);
            background: rgba(197, 168, 128, 0.08);
        }
        
        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
            min-height: calc(100vh - var(--nav-height) - var(--bottom-nav-height));
            padding: 20px 0;
        }
        
        .page.active {
            display: block;
        }
        
        /* –°–µ–∫—Ü–∏–∏ */
        .section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--graphite-dark);
            margin-bottom: 20px;
        }
        
        .section-subtitle {
            font-size: 1rem;
            color: var(--graphite-medium);
            margin-bottom: 24px;
            line-height: 1.5;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 20px;
            border: 1px solid rgba(61, 61, 61, 0.08);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--gold-metallic), var(--gold-dark));
            color: white;
            box-shadow: 0 4px 12px rgba(197, 168, 128, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(197, 168, 128, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: var(--graphite-dark);
            border: 2px solid rgba(61, 61, 61, 0.1);
        }
        
        .btn-secondary:hover {
            background: rgba(61, 61, 61, 0.02);
            border-color: var(--graphite-light);
            transform: translateY(-1px);
        }
        
        /* Hero —Å–µ–∫—Ü–∏—è */
        .hero {
            background: linear-gradient(135deg, rgba(249, 247, 243, 0.9), rgba(250, 239, 245, 0.7));
            border-radius: var(--radius-xl);
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero:before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, var(--lavender-light), transparent);
            border-radius: 50%;
            opacity: 0.3;
        }
        
        .hero:after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -30%;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, transparent, var(--pastel-pink));
            border-radius: 50%;
            opacity: 0.3;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--graphite-dark);
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.1rem;
            color: var(--graphite-medium);
            margin-bottom: 24px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* –°–µ—Ç–∫–∏ */
        .grid {
            display: grid;
            gap: 16px;
        }
        
        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .category-card {
            text-align: center;
            padding: 20px 16px;
        }
        
        .category-icon {
            font-size: 2.5rem;
            color: var(--gold-metallic);
            margin-bottom: 12px;
        }
        
        .category-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .category-card p {
            color: var(--graphite-medium);
            font-size: 0.85rem;
            margin-bottom: 16px;
        }
        
        /* –£—Å–ª—É–≥–∏ */
        .service-card {
            padding: 16px;
        }
        
        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }
        
        .service-header h4 {
            font-size: 1.1rem;
            font-weight: 600;
            flex: 1;
            margin-right: 10px;
        }
        
        .service-category {
            background: var(--pastel-pink);
            color: #C2185B;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .service-description {
            color: var(--graphite-medium);
            font-size: 0.9rem;
            margin-bottom: 16px;
            line-height: 1.4;
        }
        
        .service-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .service-price {
            color: var(--gold-metallic);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            background: linear-gradient(135deg, var(--gold-metallic), var(--gold-dark));
            color: white;
            padding: 30px 20px;
            border-radius: var(--radius-xl);
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold-metallic);
            font-size: 2.5rem;
            font-weight: 700;
            border: 4px solid rgba(255, 255, 255, 0.3);
        }
        
        .profile-name {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .profile-email {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 16px;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: var(--radius);
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        /* –ü–æ–¥–ø–∏—Å–∫–∏ */
        .subscription-card {
            padding: 24px 20px;
            text-align: center;
            border: 2px solid rgba(61, 61, 61, 0.1);
            position: relative;
        }
        
        .subscription-card.popular {
            border-color: var(--gold-metallic);
        }
        
        .popular-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gold-metallic);
            color: white;
            padding: 4px 16px;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .subscription-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .subscription-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gold-metallic);
            margin: 16px 0;
        }
        
        .subscription-price span {
            font-size: 0.9rem;
            color: var(--graphite-medium);
        }
        
        .subscription-features {
            text-align: left;
            margin: 20px 0;
        }
        
        .subscription-features li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--graphite-medium);
            font-size: 0.9rem;
        }
        
        .subscription-features i {
            color: var(--success);
            font-size: 0.9rem;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 100px;
            right: 16px;
            z-index: 3000;
            background: white;
            border-radius: var(--radius);
            padding: 16px;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--success);
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 90%;
            width: 350px;
        }
        
        .notification.error {
            border-left-color: var(--error);
        }
        
        .notification.warning {
            border-left-color: var(--warning);
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loader {
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(61, 61, 61, 0.1);
            border-top: 4px solid var(--gold-metallic);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--radius-lg);
            max-width: 400px;
            width: 100%;
            animation: modalSlideIn 0.3s ease;
        }
        
        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--graphite-dark);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--graphite-dark);
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1.5px solid rgba(61, 61, 61, 0.1);
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--gold-metallic);
        }
        
        /* –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ */
        .create-task-form {
            margin-top: 20px;
        }
        
        /* –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á */
        .task-list {
            margin-top: 20px;
        }
        
        .task-item {
            margin-bottom: 16px;
        }
        
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .task-title {
            font-weight: 600;
            font-size: 1.1rem;
            flex: 1;
        }
        
        .task-status {
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .task-status.new {
            background: #E3F2FD;
            color: #1976D2;
        }
        
        .task-status.in_progress {
            background: #FFF3E0;
            color: #EF6C00;
        }
        
        .task-status.completed {
            background: #E8F5E9;
            color: #2E7D32;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 0 12px;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .profile-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .subscription-card {
                margin-bottom: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .hero {
                padding: 20px;
            }
            
            .hero h1 {
                font-size: 1.6rem;
            }
            
            .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .profile-stats {
                grid-template-columns: 1fr;
            }
            
            .nav-item span {
                font-size: 0.7rem;
            }
            
            .notification {
                width: 90%;
                right: 5%;
            }
        }
        
        /* –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∞ */
        .admin-access-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--gold-metallic), var(--gold-dark));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            animation: pulse 2s infinite;
        }
        
        .admin-access-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(197, 168, 128, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(197, 168, 128, 0); }
            100% { box-shadow: 0 0 0 0 rgba(197, 168, 128, 0); }
        }
    </style>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="top-nav">
        <a href="#" class="logo">
            <i class="fas fa-crown logo-icon"></i>
            <span>–ö–æ–Ω—Å—å–µ—Ä–∂</span>
        </a>
        
        <div class="user-avatar" id="userAvatar" onclick="toggleUserMenu()">
            –ì
        </div>
        
        <!-- –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div class="user-menu" id="userMenu" style="display: none; position: absolute; top: 70px; right: 20px; background: white; border-radius: var(--radius); box-shadow: var(--shadow-lg); padding: 10px; min-width: 200px; z-index: 1001;">
            <div style="padding: 10px; border-bottom: 1px solid rgba(61, 61, 61, 0.1);">
                <div style="font-weight: 600;" id="menuUserName">–ì–æ—Å—Ç—å</div>
                <div style="font-size: 0.9rem; color: var(--graphite-medium);" id="menuUserEmail"></div>
            </div>
            <div style="padding: 5px 0;">
                <a href="#" class="nav-menu-item" onclick="navigateToPage('profile')" style="display: block; padding: 10px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast);">
                    <i class="fas fa-user" style="margin-right: 10px;"></i>–ü—Ä–æ—Ñ–∏–ª—å
                </a>
                <a href="#" class="nav-menu-item" onclick="showTasksPage()" style="display: block; padding: 10px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast);">
                    <i class="fas fa-tasks" style="margin-right: 10px;"></i>–ú–æ–∏ –∑–∞–¥–∞—á–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="showLoginModal()" id="loginMenuBtn" style="display: block; padding: 10px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast);">
                    <i class="fas fa-sign-in-alt" style="margin-right: 10px;"></i>–í–æ–π—Ç–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="logout()" id="logoutMenuBtn" style="display: none; padding: 10px; text-decoration: none; color: var(--error); border-radius: var(--radius-sm); transition: var(--transition-fast);">
                    <i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i>–í—ã–π—Ç–∏
                </a>
            </div>
        </div>
    </nav>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å—Ç—Ä–∞–Ω–∏—Ü—ã) -->
    <main>
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home-page" class="page active">
            <div class="container">
                <!-- Hero —Å–µ–∫—Ü–∏—è -->
                <section class="hero">
                    <div class="hero-content">
                        <h1>–ñ–µ–Ω—Å–∫–∏–π –ö–æ–Ω—Å—å–µ—Ä–∂</h1>
                        <p>–ü—Ä–µ–º–∏—É–º —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ—â–∏ –¥–ª—è –∂–µ–Ω—â–∏–Ω. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –±—ã—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Å–≤–æ–±–æ–¥–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º.</p>
                        <button class="btn btn-primary" onclick="startOrder()">
                            <i class="fas fa-plus-circle"></i>
                            –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                </section>
                
                <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏ -->
                <section class="section">
                    <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏</h2>
                    <p class="section-subtitle">–°–∞–º—ã–µ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏ —Å—Ä–µ–¥–∏ –Ω–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–∫</p>
                    
                    <div class="grid grid-2" id="popularServices">
                        <div class="card service-card">
                            <div class="service-header">
                                <h4>–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã</h4>
                                <span class="service-category">–£–±–æ—Ä–∫–∞</span>
                            </div>
                            <p class="service-description">–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç, –∫—É—Ö–Ω–∏ –∏ —Å–∞–Ω—É–∑–ª–∞</p>
                            <div class="service-footer">
                                <span class="service-price">–æ—Ç 2000‚ÇΩ</span>
                                <button class="btn btn-primary btn-sm" onclick="startOrderWithCategory(1)">
                                    –ó–∞–∫–∞–∑–∞—Ç—å
                                </button>
                            </div>
                        </div>
                        
                        <div class="card service-card">
                            <div class="service-header">
                                <h4>–ú–∞–Ω–∏–∫—é—Ä —Å –≤—ã–µ–∑–¥–æ–º</h4>
                                <span class="service-category">–ö—Ä–∞—Å–æ—Ç–∞</span>
                            </div>
                            <p class="service-description">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º —É –≤–∞—Å –¥–æ–º–∞</p>
                            <div class="service-footer">
                                <span class="service-price">–æ—Ç 1500‚ÇΩ</span>
                                <button class="btn btn-primary btn-sm" onclick="startOrderWithCategory(4)">
                                    –ó–∞–∫–∞–∑–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                <section class="section">
                    <h2 class="section-title">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                    <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â—É—é —É—Å–ª—É–≥—É</p>
                    
                    <div class="grid grid-4" id="categoriesGrid">
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div class="loader" style="grid-column: 1 / -1; text-align: center;">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </section>
                
                <!-- –û —Å–µ—Ä–≤–∏—Å–µ -->
                <section class="section">
                    <div class="card">
                        <h2 class="section-title">–û –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ</h2>
                        <p class="section-subtitle">–ñ–µ–Ω—Å–∫–∏–π –ö–æ–Ω—Å—å–µ—Ä–∂ ‚Äî —ç—Ç–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–æ–º–æ—â–Ω–∏—Ü, –≥–æ—Ç–æ–≤—ã—Ö –≤–∑—è—Ç—å –Ω–∞ —Å–µ–±—è –≤–∞—à–∏ –±—ã—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏.</p>
                        
                        <div class="grid grid-2" style="margin-top: 20px;">
                            <div style="text-align: center; padding: 20px;">
                                <i class="fas fa-shield-alt" style="font-size: 2.5rem; color: var(--gold-metallic); margin-bottom: 16px;"></i>
                                <h3 style="font-size: 1.2rem; margin-bottom: 10px;">–ë–µ–∑–æ–ø–∞—Å–Ω–æ</h3>
                                <p style="color: var(--graphite-medium); font-size: 0.9rem;">–í—Å–µ –ø–æ–º–æ—â–Ω–∏—Ü—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –æ–±—É—á–µ–Ω–∏–µ</p>
                            </div>
                            
                            <div style="text-align: center; padding: 20px;">
                                <i class="fas fa-clock" style="font-size: 2.5rem; color: var(--gold-metallic); margin-bottom: 16px;"></i>
                                <h3 style="font-size: 1.2rem; margin-bottom: 10px;">–£–¥–æ–±–Ω–æ</h3>
                                <p style="color: var(--graphite-medium); font-size: 0.9rem;">–ë—ã—Å—Ç—Ä—ã–π –ø–æ–¥–±–æ—Ä –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ª—É–≥ -->
        <div id="services-page" class="page">
            <div class="container">
                <section class="section">
                    <h2 class="section-title">–í—Å–µ —É—Å–ª—É–≥–∏</h2>
                    <p class="section-subtitle">–ü–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —É—Å–ª—É–≥, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –∑–∞–∫–∞–∑–∞</p>
                    
                    <div class="grid grid-3" id="servicesGrid">
                        <!-- –£—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div class="loader" style="grid-column: 1 / -1; text-align: center;">
                            <div class="spinner"></div>
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ª—É–≥...</p>
                        </div>
                    </div>
                </section>
                
                <!-- –ü–æ–¥–ø–∏—Å–∫–∏ -->
                <section class="section">
                    <h2 class="section-title">–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã</h2>
                    <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>
                    
                    <div id="subscriptionsGrid">
                        <!-- –ü–æ–¥–ø–∏—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div class="loader" style="text-align: center;">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
        <div id="create-task-page" class="page">
            <div class="container">
                <section class="section">
                    <h2 class="section-title">–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
                    <p class="section-subtitle">–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å</p>
                    
                    <div class="card">
                        <form id="createTaskForm" class="create-task-form">
                            <div class="form-group">
                                <label class="form-label" for="taskCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select id="taskCategory" class="form-input" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                                <input type="text" id="taskTitle" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskDescription">–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea id="taskDescription" class="form-input" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskAddress">–ê–¥—Ä–µ—Å</label>
                                <input type="text" id="taskAddress" class="form-input" placeholder="–ì–¥–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskDeadline">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                                <input type="date" id="taskDeadline" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskContact">–ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —Å–≤—è–∑–∏</label>
                                <input type="text" id="taskContact" class="form-input" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Telegram" required>
                            </div>
                            
                            <div style="display: flex; gap: 12px; margin-top: 30px;">
                                <button type="button" class="btn btn-secondary" onclick="cancelTask()" style="flex: 1;">
                                    –û—Ç–º–µ–Ω–∞
                                </button>
                                <button type="submit" class="btn btn-primary" style="flex: 1;">
                                    –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                                </button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile-page" class="page">
            <div class="container">
                <!-- –®–∞–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">
                        –ì
                    </div>
                    <div class="profile-name" id="profileName">–ì–æ—Å—Ç—å</div>
                    <div class="profile-email" id="profileEmail">–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</div>
                    
                    <div class="profile-stats" id="profileStats">
                        <div class="stat-item">
                            <div class="stat-value" id="statTasks">0</div>
                            <div class="stat-label">–ó–∞–¥–∞—á</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statRating">0</div>
                            <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statBalance">0‚ÇΩ</div>
                            <div class="stat-label">–ë–∞–ª–∞–Ω—Å</div>
                        </div>
                    </div>
                </div>
                
                <!-- –ú–æ–∏ –∑–∞–¥–∞—á–∏ -->
                <section class="section">
                    <h2 class="section-title">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                    <div class="task-list" id="userTasksList">
                        <div class="card" style="text-align: center; padding: 40px;">
                            <i class="fas fa-tasks" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                            <p style="color: var(--graphite-medium); margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á</p>
                            <button class="btn btn-primary" onclick="startOrder()">
                                <i class="fas fa-plus"></i>
                                –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
                <section class="section">
                    <h2 class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <div class="card">
                        <div style="padding: 10px 0;">
                            <a href="#" class="nav-menu-item" onclick="showSubscriptionModal()" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                                <i class="fas fa-crown" style="margin-right: 12px; color: var(--gold-metallic);"></i>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
                            </a>
                            <a href="#" class="nav-menu-item" onclick="showNotificationsSettings()" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                                <i class="fas fa-bell" style="margin-right: 12px; color: var(--gold-metallic);"></i>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                            </a>
                            <a href="#" class="nav-menu-item" onclick="showHelp()" style="display: block; padding: 12px; text-decoration: none; color: var(--graphite-dark); border-radius: var(--radius-sm); transition: var(--transition-fast); margin-bottom: 8px;">
                                <i class="fas fa-question-circle" style="margin-right: 12px; color: var(--gold-metallic);"></i>–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
    
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="navigateToPage('home')" data-page="home">
            <i class="fas fa-home"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="nav-item" onclick="navigateToPage('services')" data-page="services">
            <i class="fas fa-list-alt"></i>
            <span>–£—Å–ª—É–≥–∏</span>
        </a>
        <a href="#" class="nav-item" onclick="startOrder()" id="createTaskBtn">
            <i class="fas fa-plus-circle"></i>
            <span>–°–æ–∑–¥–∞—Ç—å</span>
        </a>
        <a href="#" class="nav-item" onclick="navigateToPage('profile')" data-page="profile">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤) -->
    <a href="/admin.html" class="admin-access-btn" id="adminAccessBtn" style="display: none;">
        <i class="fas fa-crown"></i>
    </a>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    
    <!-- –ú–æ–¥–∞–ª–∫–∞ –≤—Ö–æ–¥–∞ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h3 class="modal-title">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h3>
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="loginEmailInput" class="form-input" placeholder="–≤–∞—à@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPasswordInput" class="form-input" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    –í–æ–π—Ç–∏
                </button>
            </form>
            <div style="text-align: center; margin-top: 20px;">
                <p style="color: var(--graphite-medium); font-size: 0.9rem;">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
                    <a href="#" onclick="showRegisterModal()" style="color: var(--gold-metallic); text-decoration: none; font-weight: 600;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                </p>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <h3 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <form id="registerForm">
                <div class="form-group">
                    <label class="form-label">–ò–º—è</label>
                    <input type="text" id="registerFirstName" class="form-input" placeholder="–í–∞—à–µ –∏–º—è" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="registerEmail" class="form-input" placeholder="–≤–∞—à@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="registerPhone" class="form-input" placeholder="+7 (999) 123-45-67" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPassword" class="form-input" placeholder="–ù–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
            </form>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–¥–ø–∏—Å–∫–∏ -->
    <div class="modal" id="subscriptionModal">
        <div class="modal-content">
            <h3 class="modal-title">–í—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏</h3>
            <div id="subscriptionModalContent">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let categories = [];
        let services = [];
        let subscriptions = [];
        let userTasks = [];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            init();
        });
        
        async function init() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            await loadCategories();
            await loadServices();
            await loadSubscriptions();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUserInterface();
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –¥–ª—è –¥–µ–¥–ª–∞–π–Ω–∞
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('taskDeadline').value = tomorrow.toISOString().split('T')[0];
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º
            setupEventListeners();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            navigateToPage('home');
        }
        
        function setupEventListeners() {
            // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
            document.getElementById('loginForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await login();
            });
            
            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('registerForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await register();
            });
            
            // –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
            document.getElementById('createTaskForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                await createTask();
            });
        }
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
        function navigateToPage(pageId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            document.getElementById(pageId + '-page').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            if (pageId !== 'create-task') {
                document.querySelector(`.nav-item[data-page="${pageId}"]`).classList.add('active');
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            switch(pageId) {
                case 'profile':
                    loadUserProfile();
                    break;
                case 'services':
                    loadServicesPage();
                    break;
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        async function loadCategories() {
            try {
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ API
                await new Promise(resolve => setTimeout(resolve, 500));
                
                categories = [
                    { id: 1, name: '–£–±–æ—Ä–∫–∞', description: '–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞, —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è —É–±–æ—Ä–∫–∞', icon: 'fas fa-broom', color: '#FF6B8B' },
                    { id: 2, name: '–ì–æ—Ç–æ–≤–∫–∞', description: '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –µ–¥—ã, –¥–∏–µ—Ç–∏—á–µ—Å–∫–æ–µ –ø–∏—Ç–∞–Ω–∏–µ', icon: 'fas fa-utensils', color: '#10b981' },
                    { id: 3, name: '–ü–æ–∫—É–ø–∫–∏', description: '–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –æ–¥–µ–∂–¥—ã, –ø–æ–¥–∞—Ä–∫–æ–≤', icon: 'fas fa-shopping-bag', color: '#3b82f6' },
                    { id: 4, name: '–ö—Ä–∞—Å–æ—Ç–∞', description: '–ú–∞–Ω–∏–∫—é—Ä, –ø—Ä–∏—á–µ—Å–∫–∏, –º–∞–∫–∏—è–∂', icon: 'fas fa-spa', color: '#8b5cf6' },
                    { id: 5, name: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è', description: '–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π', icon: 'fas fa-calendar-alt', color: '#f59e0b' },
                    { id: 6, name: '–£—Ö–æ–¥ –∑–∞ –¥–µ—Ç—å–º–∏', description: '–ü—Ä–∏—Å–º–æ—Ç—Ä –∑–∞ –¥–µ—Ç—å–º–∏, –ø–æ–º–æ—â—å —Å —É—Ä–æ–∫–∞–º–∏', icon: 'fas fa-baby', color: '#ec4899' }
                ];
                
                renderCategories();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π', 'error');
            }
        }
        
        function renderCategories() {
            const container = document.getElementById('categoriesGrid');
            container.innerHTML = '';
            
            categories.forEach(category => {
                const card = document.createElement('div');
                card.className = 'card category-card';
                card.onclick = () => startOrderWithCategory(category.id);
                card.innerHTML = `
                    <div class="category-icon">
                        <i class="${category.icon}"></i>
                    </div>
                    <h3>${category.name}</h3>
                    <p>${category.description}</p>
                `;
                container.appendChild(card);
            });
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ª—É–≥
        async function loadServices() {
            try {
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ API
                await new Promise(resolve => setTimeout(resolve, 500));
                
                services = [
                    { id: 1, name: '–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã', description: '–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç', category: '–£–±–æ—Ä–∫–∞', price: '–æ—Ç 2000‚ÇΩ' },
                    { id: 2, name: '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —É–∂–∏–Ω–∞', description: '–£–∂–∏–Ω –Ω–∞ 4 –ø–µ—Ä—Å–æ–Ω—ã', category: '–ì–æ—Ç–æ–≤–∫–∞', price: '–æ—Ç 1500‚ÇΩ' },
                    { id: 3, name: '–ú–∞–Ω–∏–∫—é—Ä —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º', description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä', category: '–ö—Ä–∞—Å–æ—Ç–∞', price: '–æ—Ç 1500‚ÇΩ' },
                    { id: 4, name: '–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤', description: '–ó–∞–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ –Ω–µ–¥–µ–ª—é', category: '–ü–æ–∫—É–ø–∫–∏', price: '–æ—Ç 1000‚ÇΩ' },
                    { id: 5, name: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞', description: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–µ—Ç—Å–∫–æ–≥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è', category: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è', price: '–æ—Ç 5000‚ÇΩ' },
                    { id: 6, name: '–ù—è–Ω—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤', description: '–ü—Ä–∏—Å–º–æ—Ç—Ä –∑–∞ —Ä–µ–±–µ–Ω–∫–æ–º', category: '–£—Ö–æ–¥ –∑–∞ –¥–µ—Ç—å–º–∏', price: '–æ—Ç 500‚ÇΩ/—á–∞—Å' }
                ];
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥:', error);
            }
        }
        
        function loadServicesPage() {
            const container = document.getElementById('servicesGrid');
            container.innerHTML = '';
            
            services.forEach(service => {
                const card = document.createElement('div');
                card.className = 'card service-card';
                card.innerHTML = `
                    <div class="service-header">
                        <h4>${service.name}</h4>
                        <span class="service-category">${service.category}</span>
                    </div>
                    <p class="service-description">${service.description}</p>
                    <div class="service-footer">
                        <span class="service-price">${service.price}</span>
                        <button class="btn btn-primary btn-sm" onclick="startOrderWithService(${service.id})">
                            –ó–∞–∫–∞–∑–∞—Ç—å
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
        async function loadSubscriptions() {
            try {
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ API
                await new Promise(resolve => setTimeout(resolve, 500));
                
                subscriptions = [
                    { 
                        id: 1, 
                        name: 'essential', 
                        display_name: '–≠—Å—Å–µ–Ω—à–ª', 
                        description: '–ë–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä —É—Å–ª—É–≥',
                        price_monthly: 0,
                        price_yearly: 0,
                        initial_fee: 500,
                        features: ['–î–æ 5 –∑–∞–¥–∞—á –≤ –º–µ—Å—è—Ü', '–í—Å–µ –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏', '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ email'],
                        is_popular: false
                    },
                    { 
                        id: 2, 
                        name: 'premium', 
                        display_name: '–ü—Ä–µ–º–∏—É–º', 
                        description: '–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —É—Å–ª—É–≥–∞–º',
                        price_monthly: 1990,
                        price_yearly: 19900,
                        initial_fee: 1000,
                        features: ['–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏', '–í—Å–µ —É—Å–ª—É–≥–∏ –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞'],
                        is_popular: true
                    }
                ];
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫:', error);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserInterface() {
            if (currentUser) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è
                const firstLetter = currentUser.first_name ? currentUser.first_name.charAt(0).toUpperCase() : '–ì';
                document.getElementById('userAvatar').textContent = firstLetter;
                document.getElementById('profileAvatar').textContent = firstLetter;
                document.getElementById('profileName').textContent = currentUser.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                document.getElementById('profileEmail').textContent = currentUser.email || '';
                document.getElementById('menuUserName').textContent = currentUser.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                document.getElementById('menuUserEmail').textContent = currentUser.email || '';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é
                document.getElementById('loginMenuBtn').style.display = 'none';
                document.getElementById('logoutMenuBtn').style.display = 'block';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
                if (currentUser.role === 'admin' || currentUser.role === 'superadmin') {
                    document.getElementById('adminAccessBtn').style.display = 'flex';
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Ñ–∏–ª—è
                updateProfileStats();
                
            } else {
                // –ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º
                document.getElementById('userAvatar').textContent = '–ì';
                document.getElementById('profileAvatar').textContent = '–ì';
                document.getElementById('profileName').textContent = '–ì–æ—Å—Ç—å';
                document.getElementById('profileEmail').textContent = '–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç';
                document.getElementById('menuUserName').textContent = '–ì–æ—Å—Ç—å';
                document.getElementById('menuUserEmail').textContent = '';
                
                document.getElementById('loginMenuBtn').style.display = 'block';
                document.getElementById('logoutMenuBtn').style.display = 'none';
                document.getElementById('adminAccessBtn').style.display = 'none';
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                document.getElementById('statTasks').textContent = '0';
                document.getElementById('statRating').textContent = '0';
                document.getElementById('statBalance').textContent = '0‚ÇΩ';
            }
        }
        
        function updateProfileStats() {
            if (!currentUser) return;
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
            document.getElementById('statTasks').textContent = currentUser.tasks_used || '0';
            document.getElementById('statRating').textContent = currentUser.rating || '0';
            document.getElementById('statBalance').textContent = (currentUser.balance || '0') + '‚ÇΩ';
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadUserProfile() {
            if (!currentUser) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤–æ–π—Ç–∏
                document.getElementById('userTasksList').innerHTML = `
                    <div class="card" style="text-align: center; padding: 40px;">
                        <i class="fas fa-user" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                        <p style="color: var(--graphite-medium); margin-bottom: 20px;">–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏</p>
                        <button class="btn btn-primary" onclick="showLoginModal()">
                            <i class="fas fa-sign-in-alt"></i>
                            –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
                        </button>
                    </div>
                `;
                return;
            }
            
            try {
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                userTasks = [
                    { id: 1, title: '–£–±–æ—Ä–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã', status: 'completed', date: '2024-12-15' },
                    { id: 2, title: '–ú–∞–Ω–∏–∫—é—Ä —Å –≤—ã–µ–∑–¥–æ–º', status: 'in_progress', date: '2024-12-20' }
                ];
                
                renderUserTasks();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è', 'error');
            }
        }
        
        function renderUserTasks() {
            const container = document.getElementById('userTasksList');
            
            if (!userTasks || userTasks.length === 0) {
                container.innerHTML = `
                    <div class="card" style="text-align: center; padding: 40px;">
                        <i class="fas fa-tasks" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 20px;"></i>
                        <p style="color: var(--graphite-medium); margin-bottom: 20px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á</p>
                        <button class="btn btn-primary" onclick="startOrder()">
                            <i class="fas fa-plus"></i>
                            –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            userTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'card task-item';
                taskElement.innerHTML = `
                    <div class="task-header">
                        <div class="task-title">${task.title}</div>
                        <span class="task-status ${task.status}">${getStatusText(task.status)}</span>
                    </div>
                    <div style="color: var(--graphite-medium); font-size: 0.9rem;">
                        <i class="far fa-calendar" style="margin-right: 8px;"></i>
                        ${task.date}
                    </div>
                `;
                container.appendChild(taskElement);
            });
        }
        
        function getStatusText(status) {
            const statusMap = {
                'new': '–ù–æ–≤–∞—è',
                'searching': '–ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è',
                'assigned': '–ù–∞–∑–Ω–∞—á–µ–Ω–∞',
                'in_progress': '–í —Ä–∞–±–æ—Ç–µ',
                'completed': '–í—ã–ø–æ–ª–Ω–µ–Ω–∞',
                'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–∞'
            };
            return statusMap[status] || status;
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
        function startOrder() {
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            navigateToPage('create-task');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–µ–ª–µ–∫—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const select = document.getElementById('taskCategory');
            select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                select.appendChild(option);
            });
            
            // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
            if (currentUser.phone) {
                document.getElementById('taskContact').value = currentUser.phone;
            }
        }
        
        function startOrderWithCategory(categoryId) {
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            startOrder();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            setTimeout(() => {
                document.getElementById('taskCategory').value = categoryId;
            }, 100);
        }
        
        function startOrderWithService(serviceId) {
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            const service = services.find(s => s.id === serviceId);
            if (service) {
                startOrder();
                
                setTimeout(() => {
                    document.getElementById('taskTitle').value = service.name;
                    document.getElementById('taskDescription').value = service.description;
                }, 100);
            }
        }
        
        function cancelTask() {
            navigateToPage('home');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('createTaskForm').reset();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ–¥–ª–∞–π–Ω
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('taskDeadline').value = tomorrow.toISOString().split('T')[0];
        }
        
        async function createTask() {
            if (!currentUser) {
                showNotification('–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É', 'error');
                return;
            }
            
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                const taskData = {
                    category_id: document.getElementById('taskCategory').value,
                    title: document.getElementById('taskTitle').value,
                    description: document.getElementById('taskDescription').value,
                    address: document.getElementById('taskAddress').value,
                    deadline: document.getElementById('taskDeadline').value,
                    contact_info: document.getElementById('taskContact').value,
                    client_id: currentUser.id
                };
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è
                if (!taskData.category_id || !taskData.title || !taskData.description || 
                    !taskData.address || !taskData.deadline || !taskData.contact_info) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                // –ò–º–∏—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
                console.log('–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:', taskData);
                
                showNotification('–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞! –ú—ã –∏—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â—É—é –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü—É.', 'success');
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
                cancelTask();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫
                const newTask = {
                    id: Date.now(),
                    title: taskData.title,
                    status: 'new',
                    date: new Date().toISOString().split('T')[0]
                };
                
                if (!userTasks) userTasks = [];
                userTasks.unshift(newTask);
                
                if (document.getElementById('profile-page').classList.contains('active')) {
                    renderUserTasks();
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏:', error);
                showNotification('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏: ' + error.message, 'error');
            }
        }
        
        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
        async function login() {
            try {
                const email = document.getElementById('loginEmailInput').value;
                const password = document.getElementById('loginPasswordInput').value;
                
                if (!email || !password) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –≤—Ö–æ–¥–∞
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
                if (email && password) {
                    currentUser = {
                        id: 1,
                        firstName: '–ê–Ω–Ω–∞',
                        email: email,
                        phone: '+7 (999) 123-45-67',
                        role: email.includes('admin') ? 'admin' : 'client',
                        tasks_used: 2,
                        rating: 4.8,
                        balance: 1500
                    };
                    
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    showNotification('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!', 'success');
                    closeModal('loginModal');
                    updateUserInterface();
                    loadUserProfile();
                    
                    // –ï—Å–ª–∏ –º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è, –æ–±–Ω–æ–≤–ª—è–µ–º –µ—ë
                    if (document.getElementById('profile-page').classList.contains('active')) {
                        loadUserProfile();
                    }
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message, 'error');
            }
        }
        
        async function register() {
            try {
                const firstName = document.getElementById('registerFirstName').value;
                const email = document.getElementById('registerEmail').value;
                const phone = document.getElementById('registerPhone').value;
                const password = document.getElementById('registerPassword').value;
                
                if (!firstName || !email || !phone || !password) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showNotification('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                    return;
                }
                
                // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                currentUser = {
                    id: Date.now(),
                    firstName: firstName,
                    email: email,
                    phone: phone,
                    role: 'client',
                    tasks_used: 0,
                    rating: 0,
                    balance: 0
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', 'success');
                closeModal('registerModal');
                updateUserInterface();
                loadUserProfile();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                showNotification('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message, 'error');
            }
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserInterface();
            loadUserProfile();
            showNotification('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
            navigateToPage('home');
        }
        
        // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
            document.getElementById('registerModal').style.display = 'none';
            closeUserMenu();
        }
        
        function showRegisterModal() {
            document.getElementById('registerModal').style.display = 'flex';
            document.getElementById('loginModal').style.display = 'none';
            closeUserMenu();
        }
        
        function showSubscriptionModal() {
            const container = document.getElementById('subscriptionModalContent');
            container.innerHTML = '';
            
            subscriptions.forEach(sub => {
                const subscriptionElement = document.createElement('div');
                subscriptionElement.className = `card subscription-card ${sub.is_popular ? 'popular' : ''}`;
                
                if (sub.is_popular) {
                    subscriptionElement.innerHTML += '<div class="popular-badge">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>';
                }
                
                subscriptionElement.innerHTML += `
                    <h3>${sub.display_name}</h3>
                    <p style="color: var(--graphite-medium); margin-bottom: 15px;">${sub.description}</p>
                    
                    <div class="subscription-price">
                        ${formatNumber(sub.price_monthly)}<span>‚ÇΩ/–º–µ—Å</span>
                    </div>
                    
                    <div style="color: var(--graphite-light); font-size: 0.9rem; margin-bottom: 15px;">
                        –í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å: ${formatNumber(sub.initial_fee)}‚ÇΩ
                    </div>
                    
                    <ul class="subscription-features">
                        ${sub.features.map(feature => `<li><i class="fas fa-check"></i> ${feature}</li>`).join('')}
                    </ul>
                    
                    <button class="btn ${sub.is_popular ? 'btn-primary' : 'btn-secondary'}" style="width: 100%; margin-top: 20px;" onclick="selectSubscription(${sub.id})">
                        –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ
                    </button>
                `;
                
                container.appendChild(subscriptionElement);
            });
            
            document.getElementById('subscriptionModal').style.display = 'flex';
            closeUserMenu();
        }
        
        function selectSubscription(subscriptionId) {
            const subscription = subscriptions.find(s => s.id === subscriptionId);
            if (subscription) {
                const message = `–í—ã –≤—ã–±—Ä–∞–ª–∏ —Ç–∞—Ä–∏—Ñ "${subscription.display_name}"\n\n` +
                              `–¶–µ–Ω–∞: ${formatNumber(subscription.price_monthly)}‚ÇΩ/–º–µ—Å\n` +
                              `–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å: ${formatNumber(subscription.initial_fee)}‚ÇΩ`;
                
                showNotification('–¢–∞—Ä–∏—Ñ —É—Å–ø–µ—à–Ω–æ –≤—ã–±—Ä–∞–Ω!', 'success');
                closeModal('subscriptionModal');
            }
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatNumber(num) {
            return num ? num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ') : '0';
        }
        
        function showNotification(message, type = 'success') {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const oldNotification = document.querySelector('.notification');
            if (oldNotification) {
                oldNotification.remove();
            }
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'fas fa-check-circle';
            if (type === 'error') icon = 'fas fa-exclamation-circle';
            if (type === 'warning') icon = 'fas fa-exclamation-triangle';
            
            notification.innerHTML = `
                <i class="${icon}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }
        
        // –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }
        
        function closeUserMenu() {
            document.getElementById('userMenu').style.display = 'none';
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            const userAvatar = document.getElementById('userAvatar');
            
            if (userMenu.style.display === 'block' && 
                !userMenu.contains(event.target) && 
                !userAvatar.contains(event.target)) {
                userMenu.style.display = 'none';
            }
        });
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
        function showTasksPage() {
            navigateToPage('profile');
            closeUserMenu();
        }
        
        function showNotificationsSettings() {
            showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏', 'info');
        }
        
        function showHelp() {
            showNotification('–†–∞–∑–¥–µ–ª –ø–æ–º–æ—â–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏', 'info');
        }
    </script>
</body>
</html>
